import{_ as O,a as Q}from"./20hxDWMm.js";import{_ as F}from"./DW7eMkxi.js";import{_ as W}from"./C0gBfoxp.js";import{_ as H}from"./DPqcs892.js";import{_ as R}from"./CRY_mf7T.js";import{_ as M}from"./CqjtwZQZ.js";import{g as x,c as f,o as m,b as r,w as _,a as t,q as z,t as b,v as E,I as G,r as $,F as K,p as s,j as X,J as Y,k as Z,C as V,l as J,y as ee,D as te}from"./Bnm5I_Xf.js";import{u as I}from"./hhQzlmSY.js";import{_ as ae}from"./C-wnUbs3.js";import{_ as ne}from"./C3JG33nt.js";import{u as oe}from"./GLY8YxPi.js";import{_ as se,a as le}from"./BEjNraNo.js";import"./cEHHnXSE.js";const ie={class:"grid mt-4 w-full max-w-lg gap-4"},re={class:"space-y-2 mb-4 flex gap-2"},ue={class:"space-y-2 mb-4"},de=x({__name:"AddPaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},createPayment:{type:Function},isLoading:{type:Boolean},newPayment:{},optionMethode:{},optionStatus:{}},setup(g){return(e,a)=>{const i=H,y=R,p=F,u=M;return m(),f("div",null,[r(u,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",ie,[a[4]||(a[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:a[3]||(a[3]=z((...o)=>e.createPayment&&e.createPayment(...o),["prevent"]))},[t("div",re,[r(i,{required:"",label:"Statut",modelValue:e.newPayment.status,"onUpdate:modelValue":a[0]||(a[0]=o=>e.newPayment.status=o),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),r(i,{required:"",modelValue:e.newPayment.mode_paiement,"onUpdate:modelValue":a[1]||(a[1]=o=>e.newPayment.mode_paiement=o),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",ue,[r(y,{required:"",modelValue:e.newPayment.amount,"onUpdate:modelValue":a[2]||(a[2]=o=>e.newPayment.amount=o),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),r(p,{label:"Créer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),me={class:"grid mt-4 w-full max-w-lg gap-4"},ce={class:"flex flex-col space-y-1.5 text-center sm:text-left"},pe={id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"},ye={class:"space-y-2 mb-4"},fe={class:"w-full"},be={class:"w-full flex gap-4 items-center"},_e={class:"flex items-center cursor-pointer"},ve={class:"flex items-center cursor-pointer"},ge=x({__name:"AddPaymentClubComponent",props:{isActive:{type:Boolean},setActive:{type:Function},processPayment:{type:Function},isLoading:{type:Boolean},paymentAmount:{}},setup(g){return(e,a)=>{const i=R,y=F,p=M;return m(),f("div",null,[r(p,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",me,[t("div",ce,[t("h2",pe,b(e.$t("facture.detail.payment_form.title_new")),1)]),t("form",{class:"space-y-8",onSubmit:a[3]||(a[3]=z((...u)=>e.processPayment&&e.processPayment(...u),["prevent"]))},[t("div",ye,[r(i,{required:"",modelValue:e.paymentAmount.amount,"onUpdate:modelValue":a[0]||(a[0]=u=>e.paymentAmount.amount=u),min:"100",type:"number",label:e.$t("facture.detail.payment_form.label1"),placeholder:e.$t("facture.detail.payment_form.label1"),name:"title"},null,8,["modelValue","label","placeholder"])]),t("div",fe,[a[6]||(a[6]=t("h3",{class:"mb-3"},"Moyen de paiement",-1)),t("div",be,[t("div",_e,[E(t("input",{type:"radio",id:"mm",name:"mode_paiement","onUpdate:modelValue":a[1]||(a[1]=u=>e.paymentAmount.mode_paiement=u),value:"mobile_money",class:"peer checked:bg-primary mr-2 cursor-pointer",checked:""},null,512),[[G,e.paymentAmount.mode_paiement]]),a[4]||(a[4]=t("label",{for:"mm",class:"peer-checked:text-primary text-[13px] font-[500] text-zinc-700"},"Mobile Money",-1))]),t("div",ve,[E(t("input",{type:"radio","onUpdate:modelValue":a[2]||(a[2]=u=>e.paymentAmount.mode_paiement=u),id:"cb",name:"mode_paiement",value:"credit_card",class:"peer checked:bg-primary mr-2 cursor-pointer"},null,512),[[G,e.paymentAmount.mode_paiement]]),a[5]||(a[5]=t("label",{for:"cb",class:"peer-checked:text-primary text-[13px] font-[500] text-zinc-700"},"Carte de Crédit",-1))])])]),r(y,{label:e.$t("facture.detail.payment_form.button_new"),isLoading:e.isLoading},null,8,["label","isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),he={class:"grid mt-4 w-full max-w-lg gap-4"},we={class:"space-y-2 mb-4 flex gap-2"},ke={class:"space-y-2 mb-4"},xe=x({__name:"UpdatePaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},updatePayment:{type:Function},isLoading:{type:Boolean},update:{},optionMethode:{},optionStatus:{}},setup(g){return(e,a)=>{const i=H,y=R,p=F,u=M;return m(),f("div",null,[r(u,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",he,[a[4]||(a[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:a[3]||(a[3]=z((...o)=>e.updatePayment&&e.updatePayment(...o),["prevent"]))},[t("div",we,[r(i,{required:"",label:"Statut",modelValue:e.update.status,"onUpdate:modelValue":a[0]||(a[0]=o=>e.update.status=o),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),r(i,{required:"",modelValue:e.update.mode_paiement,"onUpdate:modelValue":a[1]||(a[1]=o=>e.update.mode_paiement=o),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",ke,[r(y,{required:"",modelValue:e.update.amount,"onUpdate:modelValue":a[2]||(a[2]=o=>e.update.amount=o),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),r(p,{label:"Enregistrer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),$e={class:"mt-4"},Pe={class:"px-4 sm:px-0 flex items-center justify-between"},Ae={class:"text-base font-semibold leading-7 text-gray-900"},Ce={class:"mt-6"},Ue=["onClick"],Ve=x({__name:"PaymentComponent",props:{payments:{},facture:{},user:{},handleListe:{type:Function}},setup(g){const e=I(),a=g,i=$(!1),y=$(!1),p=$(!1),u=n=>{y.value=n},o=n=>{i.value=n},P=n=>{p.value=n},h=n=>{e.updatePayment.status=n==null?void 0:n.status,e.updatePayment.mode_paiement=n==null?void 0:n.mode_paiement,e.updatePayment.id=n==null?void 0:n.id,e.updatePayment.amount=n==null?void 0:n.amount,u(!0)},q=async n=>{await e.create(n),a.handleListe()},S=async n=>{await Promise.all([e.processePayment(n),a.handleListe()])},B=async()=>{await Promise.all([e.update(),a.handleListe()])},w=[{label:"facture.detail.payment_colunm.td1",key:"reference"},{label:"facture.detail.payment_colunm.td2",key:"amount"},{label:"facture.detail.payment_colunm.fees",key:"fee"},{label:"facture.detail.payment_colunm.total_amount",key:"total_amount"},{label:"facture.detail.payment_colunm.td3",key:"status"},{label:"facture.detail.payment_colunm.td6",key:"provider_reference"},{label:"facture.detail.payment_colunm.td4",key:"mode_paiement"},{label:"facture.detail.payment_colunm.td5",key:"date"}],j={admin:w,super_admin:w,club:w},l=[{label:"en attente",status:"en attente"},{label:"payé",status:"payée"},{label:"échec",status:"échec"},{label:"annulé",status:"annulé"}],c=[{label:"espèces",status:"espèces"},{label:"chèque",status:"chèque"},{label:"mobile money",status:"mobile money"},{label:"virement",status:"virement"},{label:"carte",status:"carte"}];return(n,v)=>{var A,C;const D=W,T=O,N=de,k=ge,L=xe;return m(),f("section",$e,[t("div",Pe,[t("h3",Ae,b(n.$t("facture.detail.title_payment")),1),((A=n.user)==null?void 0:A.role)!=="club"?(m(),f(K,{key:0},[],64)):(m(),f("button",{key:1,type:"button",onClick:v[0]||(v[0]=d=>P(!0)),class:"cursor-pointer items-center bg-primary justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none text-xs disabled:opacity-50 bg-pri text-slate-50 shadow px-4 py-3 self-start"},b(n.$t("facture.detail.btn_payment")),1))]),t("div",Ce,[r(T,{columns:j[(C=n.user)==null?void 0:C.role],data:n.payments},{status:_(({item:d})=>[r(D,{status:d==null?void 0:d.status},null,8,["status"])]),action:_(({item:d})=>[t("button",{type:"button",onClick:U=>h(d),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},v[1]||(v[1]=[t("i",{class:"uil uil-pen"},null,-1)]),8,Ue)]),_:1},8,["columns","data"])]),r(N,{"is-active":s(i),"set-active":o,"option-status":l,newPayment:s(e).newPayment,"option-methode":c,createPayment:()=>q(n.facture),"is-loading":s(e).isLoading},null,8,["is-active","newPayment","createPayment","is-loading"]),r(k,{"is-active":s(p),"set-active":P,paymentAmount:s(e).paymentAmount,processPayment:()=>S(n.facture),"is-loading":s(e).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"]),r(L,{"is-active":s(y),"set-active":u,"option-status":l,update:s(e).updatePayment,"option-methode":c,updatePayment:B,"is-loading":s(e).isLoading},null,8,["is-active","update","is-loading"])])}}}),qe=x({__name:"CheckPaymentComponent",props:{isActive:{type:Boolean}},setup(g){return(e,a)=>{const i=M;return m(),f("div",null,[r(i,{isActive:e.isActive},{default:_(()=>a[0]||(a[0]=[t("div",{class:"grid mt-4 w-full max-w-lg gap-4"},[t("div",{class:"min-w-[370px] w-auto"},[t("a",{href:"#",class:"flex items-center justify-center"},[t("img",{alt:"logo",fetchpriority:"high",width:"120",height:"28.422",class:"mb-5",src:ae,style:{color:"transparent"}})]),t("div",{class:"rounded-xl w-full"},[t("div",{class:"flex flex-col space-y-1.5 p-6 px-2 sm:px-6"},[t("h3",{class:"font-semibold text-center tracking-tight text-xl"}," Vérification du paiement "),t("div",{class:"flex items-center justify-center"},[t("div",{class:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})])])])])],-1)])),_:1},8,["isActive"])])}}}),Le={class:"mt-4"},Fe={class:"mt-6"},Me=["onClick"],Se=x({__name:"RubriqueComponent",props:{rubriques:{},facture:{},user:{}},setup(g){I();const e={admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],super_admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],club:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}]};return(a,i)=>{var u;const y=W,p=O;return m(),f("section",Le,[i[1]||(i[1]=t("div",{class:"px-4 sm:px-0 flex items-center justify-between"},[t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Rubriques")],-1)),t("div",Fe,[r(p,{columns:e[(u=a.user)==null?void 0:u.role],data:a.rubriques},{status:_(({item:o})=>[r(y,{status:o==null?void 0:o.status},null,8,["status"])]),action:_(({item:o})=>[t("button",{type:"button",onClick:P=>a.setUpdate(o),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},i[0]||(i[0]=[t("i",{class:"uil uil-pen"},null,-1)]),8,Me)]),_:1},8,["columns","data"])])])}}}),Be={key:1,class:"w-full p-2"},je={class:"w-full"},De={class:"px-4 sm:px-0"},Te={class:"text-base font-semibold leading-7 text-gray-900"},Ne={class:"flex items-center justify-between"},Re={class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},ze={class:"mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},Ie={class:"divide-y divide-gray-100"},Ee={class:"text-sm font-medium leading-6 text-gray-900"},Ge={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Je={key:1},Oe={class:"inline-flex my-5 cursor-pointer h-10 items-center justify-center rounded-lg bg-slate-100 p-2 text-slate-500",tabindex:"0","data-orientation":"horizontal",style:{outline:"none"}},We=["data-state"],He=["data-state"],rt=x({__name:"[slug]",setup(g){const e=oe(),a=I(),i=X(),y=Y(),p=$(!1),u=$(!1),o=async()=>{var l;await e.findWithPaiement((l=i==null?void 0:i.params)==null?void 0:l.slug),u.value=!1},P=async l=>{await e.sendFacture(l),await o()},h=$(1),q=l=>{h.value=l},S=async l=>{p.value=!0,await a.checkPayment({TransactionToken:l}),await o(),y.replace({query:{}}),p.value=!1},B=[{label:"facture.detail.label1",value:"reference"},{label:"facture.detail.label2",value:"total_rubrique"},{label:"facture.detail.label3",value:"total_quantity"},{label:"facture.detail.label4",value:"amount"},{label:"facture.detail.label5",value:"amount_pay"},{label:"facture.detail.label6",value:"remaining_amount"},{label:"facture.detail.label7",value:"type",isComponent:se},{label:"facture.detail.label8",value:"status",isComponent:le},{label:"facture.detail.label9",value:"objet"},{label:"facture.detail.label10",value:"club.name"},{label:"facture.detail.label11",value:"date_emission"},{label:"facture.detail.label12",value:"date_echeance"}];function w(l,c){return c.split(".").reduce((n,v)=>n==null?void 0:n[v],l)}function j(l){return l?new Date(l).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A"}return Z(()=>{var l,c;o(),Object.keys(i.query).length>0&&((l=i.query)!=null&&l.TransactionToken)&&S((c=i.query)==null?void 0:c.TransactionToken)}),(l,c)=>{const n=Q,v=F,D=Ve,T=qe,N=ne;return m(),f("div",null,[r(N,null,{default:_(({userConnected:k})=>{var L,A,C;return[s(u)?(m(),V(n,{key:0})):(m(),f("div",Be,[t("section",je,[t("div",De,[t("h3",Te,b(l.$t("facture.detail.title")),1),t("div",Ne,[t("p",Re,b(l.$t("facture.detail.desc")),1),((L=s(e).facture)==null?void 0:L.status)==="brouillon"&&(k==null?void 0:k.role)!=="club"?(m(),V(v,{key:0,onClick:c[0]||(c[0]=d=>{var U;return P((U=s(e).facture)==null?void 0:U.reference)}),type:"button",class:"max-w-max",label:"Envoyer la facture",isLoading:s(e).isLoading},null,8,["isLoading"])):J("",!0)])]),t("div",ze,[t("div",Ie,[(m(),f(K,null,ee(B,(d,U)=>t("div",{key:U,class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},[t("div",Ee,b(l.$t(d.label)),1),t("div",Ge,[d.isComponent?(m(),V(te(d.isComponent),{key:0,status:w(s(e).facture,d.value)||"N/A"},null,8,["status"])):(m(),f("span",Je,b(d.value==="date_emission"||d.value==="date_echeance"?j(w(s(e).facture,d.value)):w(s(e).facture,d.value)||"N/A"),1))])])),64))])])]),t("div",Oe,[t("button",{onClick:c[1]||(c[1]=d=>q(1)),type:"button","data-state":s(h)==1&&"active",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:focus-visible:ring-slate-300",tabindex:"-1","data-orientation":"horizontal","data-radix-collection-item":""},b(l.$t("facture.detail.tab.tab1")),9,We),t("button",{onClick:c[2]||(c[2]=d=>q(2)),"data-state":s(h)==2&&"active",type:"button",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:focus-visible:ring-slate-300",tabindex:"0","data-orientation":"horizontal","data-radix-collection-item":""},b(l.$t("facture.detail.tab.tab2")),9,He)]),s(h)==1?(m(),V(D,{key:0,user:k,payments:(A=s(e).facture)==null?void 0:A.payments,facture:s(e).facture,handleListe:o},null,8,["user","payments","facture"])):s(h)==2?(m(),V(s(Se),{key:1,user:k,rubriques:(C=s(e).facture)==null?void 0:C.rubriques,facture:s(e).facture},null,8,["user","rubriques","facture"])):J("",!0),r(T,{isActive:s(p)},null,8,["isActive"])]))]}),_:1})])}}});export{rt as default};
