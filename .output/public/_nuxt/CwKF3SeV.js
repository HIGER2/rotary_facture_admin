import{z as x,A as C,r as k,G as p}from"./D1yP2C89.js";import{u as e}from"./CW1WITLF.js";const M=x("club",()=>{async function t(r){return await e(`/club/all?${r.toString()}`)}async function f(r){return await e(`/club/all/filter?${r.toString()}`)}async function o(r){return await e(`/club/${r.id}/${r.uid}`)}async function s(r){return await e("/club/create",{method:"POST",body:r})}async function y(r){return await e("/club/update",{method:"put",body:r})}return{all:t,create:s,findDetail:o,allByFilter:f,update:y}}),z=x("ClubViewModel",()=>{const t=C({data:[],page:[]}),f=k(),o=k(!1),s=M();let y={name:"",country_id:"",status:""};const r=C({...y}),b=C({...y,id:""});async function B(c=""){var l,d,u,g,w,S,i,v,h,E;const a=await s.allByFilter(c);return(d=(l=a.data)==null?void 0:l.data)==null||d.links.shift(),(g=(u=a.data)==null?void 0:u.data)==null||g.links.pop(),t.page=(S=(w=a.data)==null?void 0:w.data)==null?void 0:S.links,console.log((v=(i=a.data)==null?void 0:i.data)==null?void 0:v.data),t.data=[...(E=(h=a.data)==null?void 0:h.data)==null?void 0:E.data.map((n,U)=>{var F,_,$;return{id:n==null?void 0:n.id,uid:n==null?void 0:n.club_uid,name:n==null?void 0:n.name,language:(F=n==null?void 0:n.country)==null?void 0:F.langage,desc:n==null?void 0:n.description,country:(_=n==null?void 0:n.country)==null?void 0:_.name,country_id:($=n==null?void 0:n.country)==null?void 0:$.id,status:n==null?void 0:n.status}})],a}async function D(c=""){var l,d;const a=await s.all(c);return[...(d=(l=a.data)==null?void 0:l.data)==null?void 0:d.map((u,g)=>({id:u==null?void 0:u.id,uid:u==null?void 0:u.club_uid,name:u==null?void 0:u.name,language:u==null?void 0:u.language,desc:u==null?void 0:u.description,country:u==null?void 0:u.country}))],a}async function O(c){var l;const a=await s.findDetail(c);return f.value=(l=a==null?void 0:a.data)==null?void 0:l.data,a}async function P(){var l;o.value=!0;let c={...r};const a=await s.create(c);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),o.value=!1}async function T(){var l;o.value=!0;let c={...b};console.log("updateClub",b);const a=await s.update(c);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),o.value=!1}return{all:D,club:f,clubs:t,newClub:r,create:P,isLoading:o,findDetail:O,allByFilter:B,updateClub:b,update:T}});export{z as u};
