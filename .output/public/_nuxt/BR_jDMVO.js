import{f as k,aS as V,bE as F,bz as M,c as z,o as A,a as D,b as O,t as P,be as $,aT as j,l as I,G as B,H as f,z as q,r as C,I as b}from"./CvSWjzOv.js";const N={class:"mt-4 flex w-full flex-col justify-start gap-1"},U=["for"],L=k({__name:"FormTextArea",props:V({label:{},placeholder:{},modelValue:{},name:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:V(["update:modelValue"],["update:modelValue"]),setup(t,{emit:c}){F(t,"modelValue");const l=t,n=c,d=M();return(s,i)=>{const y=$("TextArea");return A(),z("div",N,[D("label",{for:s.name,class:"text-[13px] font-[500] text-zinc-700"},P(s.label),9,U),O(y,j({id:s.name,value:l.modelValue,onInput:i[0]||(i[0]=g=>n("update:modelValue",g.target.value)),placeholder:s.placeholder,disabled:s.disabled},I(d),{class:"flex resize-none w-full rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-xs transition-colors placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50"}),null,16,["id","value","placeholder","disabled"])])}}}),Y=B("rubrique",()=>{async function t(s){return await f(`/rubrique/all?${s.toString()}`)}async function c(s){return await f(`/rubrique/all/filter?${s.toString()}`)}async function l(s){return await f(`/rubrique/${s.id}/${s.uid}`)}async function n(s){return await f("/rubrique/create",{method:"POST",body:s})}async function d(s){return await f("/rubrique/update",{method:"put",body:s})}return{all:t,create:n,findDetail:l,allByFilter:c,update:d}}),J=B("RubriqueViewModel",()=>{const t=q({data:[],page:[]}),c=C(),l=C(!1),n=Y();let d={libele:"",price:"",designation:"",status:"actif",priority:"medium"};const s=q({...d}),i=q({...d,id:""});async function y(u=""){var o,p,e,w,v,S,x,h;const a=await n.allByFilter(u);return(p=(o=a.data)==null?void 0:o.data)==null||p.links.shift(),(w=(e=a.data)==null?void 0:e.data)==null||w.links.pop(),t.page=(S=(v=a.data)==null?void 0:v.data)==null?void 0:S.links,t.data=[...(h=(x=a.data)==null?void 0:x.data)==null?void 0:h.data.map((r,G)=>({code:r==null?void 0:r.code,id:r==null?void 0:r.id,uid:r==null?void 0:r.rubrique_uid,libele:r==null?void 0:r.libele,designation:r==null?void 0:r.designation,price:r==null?void 0:r.price,priority:r==null?void 0:r.priority,status:r==null?void 0:r.status}))],a}async function g(u=""){var o,p;const a=await n.all(u);return[...(p=(o=a.data)==null?void 0:o.data)==null?void 0:p.map((e,w)=>({code:e==null?void 0:e.code,id:e==null?void 0:e.id,uid:e==null?void 0:e.rubrique_uid,libele:e==null?void 0:e.libele,designation:e==null?void 0:e.designation,price:e==null?void 0:e.price,priority:e==null?void 0:e.priority,status:e==null?void 0:e.status}))],a}async function T(u){var o;const a=await n.findDetail(u);return c.value=(o=a==null?void 0:a.data)==null?void 0:o.data,a}async function E(){var o;l.value=!0;let u={...s};const a=await n.create(u);a!=null&&a.error&&alert((o=a==null?void 0:a.error)==null?void 0:o.message),a!=null&&a.data&&(_(),b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS})),l.value=!1}async function R(){var o;l.value=!0;let u={...i};const a=await n.update(u);a!=null&&a.error&&alert((o=a==null?void 0:a.error)==null?void 0:o.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),l.value=!1}function _(){Object.assign(s,{...d})}return{all:g,rubrique:c,rubriques:t,newRubrique:s,create:E,isLoading:l,findDetail:T,allByFilter:y,updateRubrique:i,update:R}});export{L as _,J as u};
