import{g as _,J as V,L as k,M as E,c as F,o as A,a as D,b as O,t as P,N as $,O as z,p as N,B,z as w,r as C,I as b}from"./l5F4RGht.js";import{u as p}from"./B4uPnpJb.js";const I={class:"mt-4 flex w-full flex-col justify-start gap-1"},L=["for"],G=_({__name:"FormTextArea",props:V({label:{},placeholder:{},modelValue:{},name:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:V(["update:modelValue"],["update:modelValue"]),setup(t,{emit:d}){k(t,"modelValue");const s=t,n=d,c=E();return(l,i)=>{const y=$("TextArea");return A(),F("div",I,[D("label",{for:l.name,class:"text-[13px] font-[500] text-zinc-700"},P(l.label),9,L),O(y,z({id:l.name,value:s.modelValue,onInput:i[0]||(i[0]=g=>n("update:modelValue",g.target.value)),placeholder:l.placeholder,disabled:l.disabled},N(c),{class:"flex resize-none w-full rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-xs transition-colors placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50"}),null,16,["id","value","placeholder","disabled"])])}}}),U=B("rubrique",()=>{async function t(l){return await p(`/rubrique/all?${l.toString()}`)}async function d(l){return await p(`/rubrique/all/filter?${l.toString()}`)}async function s(l){return await p(`/rubrique/${l.id}/${l.uid}`)}async function n(l){return await p("/rubrique/create",{method:"POST",body:l})}async function c(l){return await p("/rubrique/update",{method:"put",body:l})}return{all:t,create:n,findDetail:s,allByFilter:d,update:c}}),H=B("RubriqueViewModel",()=>{const t=w({data:[],page:[]}),d=C(),s=C(!1),n=U();let c={libele:"",price:"",designation:"",status:"actif"};const l=w({...c}),i=w({...c,id:""});async function y(u=""){var o,f,e,q,v,x,S,h;const a=await n.allByFilter(u);return(f=(o=a.data)==null?void 0:o.data)==null||f.links.shift(),(q=(e=a.data)==null?void 0:e.data)==null||q.links.pop(),t.page=(x=(v=a.data)==null?void 0:v.data)==null?void 0:x.links,t.data=[...(h=(S=a.data)==null?void 0:S.data)==null?void 0:h.data.map((r,Y)=>({code:r==null?void 0:r.code,id:r==null?void 0:r.id,uid:r==null?void 0:r.rubrique_uid,libele:r==null?void 0:r.libele,comment:r==null?void 0:r.comment,quantity:r==null?void 0:r.quantity,amount:r==null?void 0:r.amount}))],a}async function g(u=""){var o,f;const a=await n.all(u);return[...(f=(o=a.data)==null?void 0:o.data)==null?void 0:f.map((e,q)=>({code:e==null?void 0:e.code,id:e==null?void 0:e.id,uid:e==null?void 0:e.rubrique_uid,libele:e==null?void 0:e.libele,designation:e==null?void 0:e.designation,price:e==null?void 0:e.price,status:e==null?void 0:e.status}))],a}async function M(u){var o;const a=await n.findDetail(u);return d.value=(o=a==null?void 0:a.data)==null?void 0:o.data,a}async function R(){var o;s.value=!0;let u={...l};const a=await n.create(u);a!=null&&a.error&&alert((o=a==null?void 0:a.error)==null?void 0:o.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),s.value=!1}async function T(){var o;s.value=!0;let u={...i};const a=await n.update(u);a!=null&&a.error&&alert((o=a==null?void 0:a.error)==null?void 0:o.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),s.value=!1}return{all:g,rubrique:d,rubriques:t,newRubrique:l,create:R,isLoading:s,findDetail:M,allByFilter:y,updateRubrique:i,update:T}});export{G as _,H as u};
