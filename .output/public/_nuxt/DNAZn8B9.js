import{E as F,G as f,y as w,r as O,H as g}from"./CB58tbNn.js";const V=F("club",()=>{async function i(u){return await f(`/club/all?${u.toString()}`)}async function y(u){return await f(`/club/all/filter?${u.toString()}`)}async function t(u){return await f(`/club/${u.id}/${u.uid}`)}async function c(u){return await f(`/club/by/member/${u.id}/${u.uid}`)}async function b(u){return await f("/club/create",{method:"POST",body:u})}async function p(u){return await f("/club/update",{method:"put",body:u})}return{all:i,create:b,findDetail:t,allByFilter:y,update:p,findByMember:c}}),H=F("ClubViewModel",()=>{const i=w({data:[],page:[]}),y=O(),t=O(!1),c=V();let b={name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]};const p=w({...b}),u=w({...b,id:""});async function k(r=""){var o,n,d,l,_,C,S,v,B;const a=await c.allByFilter(r);let s=[];return r.get("page")=="all"?s=(o=a.data)==null?void 0:o.data:((d=(n=a.data)==null?void 0:n.data)==null||d.links.shift(),(_=(l=a.data)==null?void 0:l.data)==null||_.links.pop(),i.page=(S=(C=a.data)==null?void 0:C.data)==null?void 0:S.links,s=(B=(v=a.data)==null?void 0:v.data)==null?void 0:B.data),i.data=[...s.map((e,Y)=>{var $,E,M;return{id:e==null?void 0:e.code,uid:e==null?void 0:e.club_uid,name:e==null?void 0:e.name,language:($=e==null?void 0:e.country)==null?void 0:$.langage,desc:e==null?void 0:e.description,country:(E=e==null?void 0:e.country)==null?void 0:E.name,country_id:(M=e==null?void 0:e.country)==null?void 0:M.id,status:e==null?void 0:e.status}})],a}async function x(r=""){var s,o;const a=await c.all(r);return[...(o=(s=a.data)==null?void 0:s.data)==null?void 0:o.map((n,d)=>({id:n==null?void 0:n.id,uid:n==null?void 0:n.club_uid,name:n==null?void 0:n.name,language:n==null?void 0:n.language,desc:n==null?void 0:n.description,country:n==null?void 0:n.country}))],a}async function D(r){var s;const a=await c.findDetail(r);return y.value=(s=a==null?void 0:a.data)==null?void 0:s.data,a}async function T(r){var o,n,d;h();const a=await c.findByMember(r);let s=(o=a==null?void 0:a.data)==null?void 0:o.data;return u.id=s.id,u.name=s.name,u.country_id=s.country_id,u.status=s.status,u.effectif=s.effectif,(d=(n=a==null?void 0:a.data)==null?void 0:n.data)==null||d.personels.map((l,_)=>u.club_personel[_]={id:(l==null?void 0:l.id)??"",name:(l==null?void 0:l.name)??"",email:(l==null?void 0:l.email)??"",phone:(l==null?void 0:l.phone)??""}),a}async function U(){var s;t.value=!0;let r={...p};const a=await c.create(r);a!=null&&a.error&&alert((s=a==null?void 0:a.error)==null?void 0:s.message),a!=null&&a.data&&(P(),g("Opération éffectuée",{autoClose:1e3,type:g.TYPE.SUCCESS})),t.value=!1}async function j(){var s;t.value=!0;let r={...u};const a=await c.update(r);a!=null&&a.error&&alert((s=a==null?void 0:a.error)==null?void 0:s.message),a!=null&&a.data&&g("Opération éffectuée",{autoClose:1e3,type:g.TYPE.SUCCESS}),t.value=!1}function P(){Object.assign(p,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}function h(){Object.assign(u,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}return{all:x,club:y,clubs:i,newClub:p,create:U,isLoading:t,findDetail:D,allByFilter:k,updateClub:u,update:j,findByMember:T,resetUpdateClub:h}});export{H as u};
