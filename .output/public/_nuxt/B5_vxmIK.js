import{g as _,H as V,I as k,J as A,c as E,o as F,a as D,b as P,t as $,L as z,M as O,p as I,z as B,A as q,r as C,G as b}from"./D1yP2C89.js";import{u as f}from"./CW1WITLF.js";const L={class:"mt-4 flex w-full flex-col justify-start gap-1"},N=["for"],H=_({__name:"FormTextArea",props:V({label:{},placeholder:{},modelValue:{},name:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:V(["update:modelValue"],["update:modelValue"]),setup(t,{emit:d}){k(t,"modelValue");const o=t,n=d,c=A();return(r,i)=>{const g=z("TextArea");return F(),E("div",L,[D("label",{for:r.name,class:"text-[13px] font-[500] text-zinc-700"},$(r.label),9,N),P(g,O({id:r.name,value:o.modelValue,onInput:i[0]||(i[0]=y=>n("update:modelValue",y.target.value)),placeholder:r.placeholder,disabled:r.disabled},I(c),{class:"flex resize-none w-full rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-xs transition-colors placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50"}),null,16,["id","value","placeholder","disabled"])])}}}),U=B("rubrique",()=>{async function t(r){return await f(`/rubrique/all?${r.toString()}`)}async function d(r){return await f(`/rubrique/all/filter?${r.toString()}`)}async function o(r){return await f(`/rubrique/${r.id}/${r.uid}`)}async function n(r){return await f("/rubrique/create",{method:"POST",body:r})}async function c(r){return await f("/rubrique/update",{method:"put",body:r})}return{all:t,create:n,findDetail:o,allByFilter:d,update:c}}),J=B("RubriqueViewModel",()=>{const t=q({data:[],page:[]}),d=C(),o=C(!1),n=U();let c={libele:"",price:"",designation:"",status:"actif"};const r=q({...c}),i=q({...c,id:""});async function g(u=""){var l,p,e,w,v,x,S,h;const a=await n.allByFilter(u);return(p=(l=a.data)==null?void 0:l.data)==null||p.links.shift(),(w=(e=a.data)==null?void 0:e.data)==null||w.links.pop(),t.page=(x=(v=a.data)==null?void 0:v.data)==null?void 0:x.links,t.data=[...(h=(S=a.data)==null?void 0:S.data)==null?void 0:h.data.map((s,Y)=>({code:s==null?void 0:s.code,id:s==null?void 0:s.id,uid:s==null?void 0:s.rubrique_uid,libele:s==null?void 0:s.libele,designation:s==null?void 0:s.designation,price:s==null?void 0:s.price,status:s==null?void 0:s.status}))],a}async function y(u=""){var l,p;const a=await n.all(u);return[...(p=(l=a.data)==null?void 0:l.data)==null?void 0:p.map((e,w)=>({code:e==null?void 0:e.code,id:e==null?void 0:e.id,uid:e==null?void 0:e.rubrique_uid,libele:e==null?void 0:e.libele,designation:e==null?void 0:e.designation,price:e==null?void 0:e.price,status:e==null?void 0:e.status}))],a}async function M(u){var l;const a=await n.findDetail(u);return d.value=(l=a==null?void 0:a.data)==null?void 0:l.data,a}async function R(){var l;o.value=!0;let u={...r};const a=await n.create(u);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),o.value=!1}async function T(){var l;o.value=!0;let u={...i};const a=await n.update(u);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),o.value=!1}return{all:y,rubrique:d,rubriques:t,newRubrique:r,create:R,isLoading:o,findDetail:M,allByFilter:g,updateRubrique:i,update:T}});export{H as _,J as u};
