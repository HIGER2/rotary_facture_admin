import{B as k,z as g,r as $,I as y}from"./iXaSmRFV.js";import{u as d}from"./D4RAmkR7.js";const M=k("club",()=>{async function t(o){return await d(`/club/all?${o.toString()}`)}async function f(o){return await d(`/club/all/filter?${o.toString()}`)}async function c(o){return await d(`/club/${o.id}/${o.uid}`)}async function s(o){return await d("/club/create",{method:"POST",body:o})}async function p(o){return await d("/club/update",{method:"put",body:o})}return{all:t,create:s,findDetail:c,allByFilter:f,update:p}}),z=k("ClubViewModel",()=>{const t=g({data:[],page:[]}),f=$(),c=$(!1),s=M();let p={name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]};const o=g({...p}),b=g({...p,id:""});async function x(r=""){var l,e,u,i,C,w,S,_,h,v;const a=await s.allByFilter(r);return(e=(l=a.data)==null?void 0:l.data)==null||e.links.shift(),(i=(u=a.data)==null?void 0:u.data)==null||i.links.pop(),t.page=(w=(C=a.data)==null?void 0:C.data)==null?void 0:w.links,console.log((_=(S=a.data)==null?void 0:S.data)==null?void 0:_.data),t.data=[...(v=(h=a.data)==null?void 0:h.data)==null?void 0:v.data.map((n,U)=>{var B,E,F;return{id:n==null?void 0:n.id,uid:n==null?void 0:n.club_uid,name:n==null?void 0:n.name,language:(B=n==null?void 0:n.country)==null?void 0:B.langage,desc:n==null?void 0:n.description,country:(E=n==null?void 0:n.country)==null?void 0:E.name,country_id:(F=n==null?void 0:n.country)==null?void 0:F.id,status:n==null?void 0:n.status}})],a}async function D(r=""){var l,e;const a=await s.all(r);return[...(e=(l=a.data)==null?void 0:l.data)==null?void 0:e.map((u,i)=>({id:u==null?void 0:u.id,uid:u==null?void 0:u.club_uid,name:u==null?void 0:u.name,language:u==null?void 0:u.language,desc:u==null?void 0:u.description,country:u==null?void 0:u.country}))],a}async function O(r){var l;const a=await s.findDetail(r);return f.value=(l=a==null?void 0:a.data)==null?void 0:l.data,a}async function P(){var l;c.value=!0;let r={...o};const a=await s.create(r);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&y("Opération éffectuée",{autoClose:1e3,type:y.TYPE.SUCCESS}),c.value=!1}async function T(){var l;c.value=!0;let r={...b};console.log("updateClub",b);const a=await s.update(r);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&y("Opération éffectuée",{autoClose:1e3,type:y.TYPE.SUCCESS}),c.value=!1}return{all:D,club:f,clubs:t,newClub:o,create:P,isLoading:c,findDetail:O,allByFilter:x,updateClub:b,update:T}});export{z as u};
