import{G as D,H as f,z as C,r as $,I as p}from"./BFPTrp0h.js";const z=D("club",()=>{async function y(e){return await f("/club/createFromFile",{method:"POST",body:e})}async function _(e){return await f(`/club/all?${e.toString()}`)}async function c(e){return await f(`/club/all/filter?${e.toString()}`)}async function s(e){return await f(`/club/${e.id}/${e.uid}`)}async function d(e){return await f(`/club/by/member/${e.id}/${e.uid}`)}async function g(e){return await f("/club/create",{method:"POST",body:e})}async function b(e){return await f("/club/update",{method:"put",body:e})}return{all:_,create:g,findDetail:s,allByFilter:c,update:b,findByMember:d,createFromFile:y}}),I=D("ClubViewModel",()=>{const y=C({data:[],page:[]}),_=$(),c=$(!1),s=z(),d=C({file:null});let g={name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]};const b=C({...g}),e=C({...g,id:""});async function T(){var r;if(!d.file){alert("Merci de bien vouloir selectionner un fichier");return}const u=new FormData;u.append("file",d.file),c.value=!0;const n=await s.createFromFile(u);n!=null&&n.error&&alert((r=n==null?void 0:n.error)==null?void 0:r.message),n!=null&&n.data&&(d.file=null,p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS})),c.value=!1}async function P(u=""){var t,l,i,o,w,S,F,v,O;const n=await s.allByFilter(u);let r=[];return u.get("page")=="all"?r=(t=n.data)==null?void 0:t.data:((i=(l=n.data)==null?void 0:l.data)==null||i.links.shift(),(w=(o=n.data)==null?void 0:o.data)==null||w.links.pop(),y.page=(F=(S=n.data)==null?void 0:S.data)==null?void 0:F.links,r=(O=(v=n.data)==null?void 0:v.data)==null?void 0:O.data),y.data=[...r.map((a,G)=>{var B,E,M;return{id:a==null?void 0:a.id,code:a==null?void 0:a.code,uid:a==null?void 0:a.club_uid,name:a==null?void 0:a.name,language:(B=a==null?void 0:a.country)==null?void 0:B.langage,desc:a==null?void 0:a.description,country:(E=a==null?void 0:a.country)==null?void 0:E.name,country_id:(M=a==null?void 0:a.country)==null?void 0:M.id,status:a==null?void 0:a.status}})],n}async function U(u=""){var r,t;const n=await s.all(u);return[...(t=(r=n.data)==null?void 0:r.data)==null?void 0:t.map((l,i)=>({id:l==null?void 0:l.id,uid:l==null?void 0:l.club_uid,name:l==null?void 0:l.name,language:l==null?void 0:l.language,desc:l==null?void 0:l.description,country:l==null?void 0:l.country}))],n}async function k(u){var r;const n=await s.findDetail(u);return _.value=(r=n==null?void 0:n.data)==null?void 0:r.data,n}async function x(u){var t,l,i;h();const n=await s.findByMember(u);let r=(t=n==null?void 0:n.data)==null?void 0:t.data;return e.id=r.id,e.name=r.name,e.country_id=r.country_id,e.status=r.status,e.effectif=r.effectif,(i=(l=n==null?void 0:n.data)==null?void 0:l.data)==null||i.personels.map((o,w)=>e.club_personel[w]={id:(o==null?void 0:o.id)??"",name:(o==null?void 0:o.name)??"",email:(o==null?void 0:o.email)??"",phone:(o==null?void 0:o.phone)??""}),n}async function Y(){var r;c.value=!0;let u={...b};const n=await s.create(u);n!=null&&n.error&&alert((r=n==null?void 0:n.error)==null?void 0:r.message),n!=null&&n.data&&(V(),p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS})),c.value=!1}async function j(){var r;c.value=!0;let u={...e};const n=await s.update(u);n!=null&&n.error&&alert((r=n==null?void 0:n.error)==null?void 0:r.message),n!=null&&n.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),c.value=!1}function V(){Object.assign(b,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}function h(){Object.assign(e,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}return{all:U,club:_,clubs:y,newClub:b,create:Y,isLoading:c,findDetail:k,allByFilter:P,updateClub:e,update:j,findByMember:x,resetUpdateClub:h,payload:d,createFromFile:T}});export{I as u};
