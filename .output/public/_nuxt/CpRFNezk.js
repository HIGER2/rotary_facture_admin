import{g as k,O as V,P as E,Q as F,c as M,o as P,a as A,b as D,t as O,R as $,S as z,p as N,G as B,z as w,r as C,N as b}from"./seCJEbmu.js";import{u as p}from"./DRLlnQ_b.js";const U={class:"mt-4 flex w-full flex-col justify-start gap-1"},Y=["for"],Q=k({__name:"FormTextArea",props:V({label:{},placeholder:{},modelValue:{},name:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:V(["update:modelValue"],["update:modelValue"]),setup(t,{emit:d}){E(t,"modelValue");const s=t,n=d,c=F();return(l,i)=>{const y=$("TextArea");return P(),M("div",U,[A("label",{for:l.name,class:"text-[13px] font-[500] text-zinc-700"},O(l.label),9,Y),D(y,z({id:l.name,value:s.modelValue,onInput:i[0]||(i[0]=g=>n("update:modelValue",g.target.value)),placeholder:l.placeholder,disabled:l.disabled},N(c),{class:"flex resize-none w-full rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-xs transition-colors placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50"}),null,16,["id","value","placeholder","disabled"])])}}}),j=B("rubrique",()=>{async function t(l){return await p(`/rubrique/all?${l.toString()}`)}async function d(l){return await p(`/rubrique/all/filter?${l.toString()}`)}async function s(l){return await p(`/rubrique/${l.id}/${l.uid}`)}async function n(l){return await p("/rubrique/create",{method:"POST",body:l})}async function c(l){return await p("/rubrique/update",{method:"put",body:l})}return{all:t,create:n,findDetail:s,allByFilter:d,update:c}}),H=B("RubriqueViewModel",()=>{const t=w({data:[],page:[]}),d=C(),s=C(!1),n=j();let c={libele:"",price:"",designation:"",status:"actif"};const l=w({...c}),i=w({...c,id:""});async function y(u=""){var o,f,e,q,v,S,x,h;const a=await n.allByFilter(u);return(f=(o=a.data)==null?void 0:o.data)==null||f.links.shift(),(q=(e=a.data)==null?void 0:e.data)==null||q.links.pop(),t.page=(S=(v=a.data)==null?void 0:v.data)==null?void 0:S.links,t.data=[...(h=(x=a.data)==null?void 0:x.data)==null?void 0:h.data.map((r,G)=>({code:r==null?void 0:r.code,id:r==null?void 0:r.id,uid:r==null?void 0:r.rubrique_uid,libele:r==null?void 0:r.libele,comment:r==null?void 0:r.comment,quantity:r==null?void 0:r.quantity,amount:r==null?void 0:r.amount}))],a}async function g(u=""){var o,f;const a=await n.all(u);return[...(f=(o=a.data)==null?void 0:o.data)==null?void 0:f.map((e,q)=>({code:e==null?void 0:e.code,id:e==null?void 0:e.id,uid:e==null?void 0:e.rubrique_uid,libele:e==null?void 0:e.libele,designation:e==null?void 0:e.designation,price:e==null?void 0:e.price,status:e==null?void 0:e.status}))],a}async function R(u){var o;const a=await n.findDetail(u);return d.value=(o=a==null?void 0:a.data)==null?void 0:o.data,a}async function T(){var o;s.value=!0;let u={...l};const a=await n.create(u);a!=null&&a.error&&alert((o=a==null?void 0:a.error)==null?void 0:o.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),s.value=!1}async function _(){var o;s.value=!0;let u={...i};const a=await n.update(u);a!=null&&a.error&&alert((o=a==null?void 0:a.error)==null?void 0:o.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),s.value=!1}return{all:g,rubrique:d,rubriques:t,newRubrique:l,create:T,isLoading:s,findDetail:R,allByFilter:y,updateRubrique:i,update:_}});export{Q as _,H as u};
