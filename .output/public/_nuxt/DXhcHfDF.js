import{a7 as a,ad as d,n as f}from"./C8Ssyemp.js";async function g(s,i={}){var o;const u=d(),{getCookie:c}=a(),n=c("token");let p={...i,baseURL:`${u.public.apiBase}`,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:n?`Bearer ${n}`:""}};try{return{data:await $fetch(s,{...p,onResponseError({response:t}){var r;if(t.status===401&&((r=t._data)==null?void 0:r.message)==="Unauthenticated."){const{removeCookie:l}=a();l("token"),f("/auth/login")}}}),error:null}}catch(e){return e.response?{data:null,error:((o=e.response)==null?void 0:o._data)||"Erreur inconnue"}:{data:null,error:"Une erreur inconnue est survenue"}}}export{g as u};
