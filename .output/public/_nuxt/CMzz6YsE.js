import{G as F,z as w,r as E,N as g}from"./Dk8a2MBr.js";import{u as f}from"./DvG1-CeL.js";const N=F("club",()=>{async function i(u){return await f(`/club/all?${u.toString()}`)}async function y(u){return await f(`/club/all/filter?${u.toString()}`)}async function t(u){return await f(`/club/${u.id}/${u.uid}`)}async function c(u){return await f(`/club/by/member/${u.id}/${u.uid}`)}async function b(u){return await f("/club/create",{method:"POST",body:u})}async function p(u){return await f("/club/update",{method:"put",body:u})}return{all:i,create:b,findDetail:t,allByFilter:y,update:p,findByMember:c}}),G=F("ClubViewModel",()=>{const i=w({data:[],page:[]}),y=E(),t=E(!1),c=N();let b={name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]};const p=w({...b}),u=w({...b,id:""});async function k(o=""){var r,l,n,d,s,_,C,S,v,B;const a=await c.allByFilter(o);return(l=(r=a.data)==null?void 0:r.data)==null||l.links.shift(),(d=(n=a.data)==null?void 0:n.data)==null||d.links.pop(),i.page=(_=(s=a.data)==null?void 0:s.data)==null?void 0:_.links,console.log((S=(C=a.data)==null?void 0:C.data)==null?void 0:S.data),i.data=[...(B=(v=a.data)==null?void 0:v.data)==null?void 0:B.data.map((e,V)=>{var $,M,O;return{id:e==null?void 0:e.id,uid:e==null?void 0:e.club_uid,name:e==null?void 0:e.name,language:($=e==null?void 0:e.country)==null?void 0:$.langage,desc:e==null?void 0:e.description,country:(M=e==null?void 0:e.country)==null?void 0:M.name,country_id:(O=e==null?void 0:e.country)==null?void 0:O.id,status:e==null?void 0:e.status}})],a}async function x(o=""){var r,l;const a=await c.all(o);return[...(l=(r=a.data)==null?void 0:r.data)==null?void 0:l.map((n,d)=>({id:n==null?void 0:n.id,uid:n==null?void 0:n.club_uid,name:n==null?void 0:n.name,language:n==null?void 0:n.language,desc:n==null?void 0:n.description,country:n==null?void 0:n.country}))],a}async function D(o){var r;const a=await c.findDetail(o);return y.value=(r=a==null?void 0:a.data)==null?void 0:r.data,a}async function P(o){var l,n,d;h();const a=await c.findByMember(o);let r=(l=a==null?void 0:a.data)==null?void 0:l.data;return u.id=r.id,u.name=r.name,u.country_id=r.country_id,u.status=r.status,u.effectif=r.effectif,(d=(n=a==null?void 0:a.data)==null?void 0:n.data)==null||d.personels.map((s,_)=>u.club_personel[_]={id:(s==null?void 0:s.id)??"",name:(s==null?void 0:s.name)??"",email:(s==null?void 0:s.email)??"",phone:(s==null?void 0:s.phone)??""}),a}async function T(){var r;t.value=!0;let o={...p};const a=await c.create(o);a!=null&&a.error&&alert((r=a==null?void 0:a.error)==null?void 0:r.message),a!=null&&a.data&&(j(),g("Opération éffectuée",{autoClose:1e3,type:g.TYPE.SUCCESS})),t.value=!1}async function U(){var r;t.value=!0;let o={...u};const a=await c.update(o);a!=null&&a.error&&alert((r=a==null?void 0:a.error)==null?void 0:r.message),a!=null&&a.data&&g("Opération éffectuée",{autoClose:1e3,type:g.TYPE.SUCCESS}),t.value=!1}function j(){Object.assign(p,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}function h(){Object.assign(u,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}return{all:x,club:y,clubs:i,newClub:p,create:T,isLoading:t,findDetail:D,allByFilter:k,updateClub:u,update:U,findByMember:P,resetUpdateClub:h}});export{G as u};
