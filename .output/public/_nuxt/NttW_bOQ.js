import{B as $,z as g,r as O,L as p}from"./BQ74lnCr.js";import{u as d}from"./CgSVBjub.js";const M=$("club",()=>{async function c(l){return await d(`/club/all?${l.toString()}`)}async function f(l){return await d(`/club/all/filter?${l.toString()}`)}async function r(l){return await d(`/club/${l.id}/${l.uid}`)}async function s(l){return await d("/club/create",{method:"POST",body:l})}async function i(l){return await d("/club/update",{method:"put",body:l})}return{all:c,create:s,findDetail:r,allByFilter:f,update:i}}),j=$("ClubViewModel",()=>{const c=g({data:[],page:[]}),f=O(),r=O(!1),s=M();let i={name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]};const l=g({...i}),y=g({...i,id:""});async function k(o=""){var e,t,u,b,C,w,_,S,h,v;const a=await s.allByFilter(o);return(t=(e=a.data)==null?void 0:e.data)==null||t.links.shift(),(b=(u=a.data)==null?void 0:u.data)==null||b.links.pop(),c.page=(w=(C=a.data)==null?void 0:C.data)==null?void 0:w.links,console.log((S=(_=a.data)==null?void 0:_.data)==null?void 0:S.data),c.data=[...(v=(h=a.data)==null?void 0:h.data)==null?void 0:v.data.map((n,U)=>{var B,E,F;return{id:n==null?void 0:n.id,uid:n==null?void 0:n.club_uid,name:n==null?void 0:n.name,language:(B=n==null?void 0:n.country)==null?void 0:B.langage,desc:n==null?void 0:n.description,country:(E=n==null?void 0:n.country)==null?void 0:E.name,country_id:(F=n==null?void 0:n.country)==null?void 0:F.id,status:n==null?void 0:n.status}})],a}async function x(o=""){var e,t;const a=await s.all(o);return[...(t=(e=a.data)==null?void 0:e.data)==null?void 0:t.map((u,b)=>({id:u==null?void 0:u.id,uid:u==null?void 0:u.club_uid,name:u==null?void 0:u.name,language:u==null?void 0:u.language,desc:u==null?void 0:u.description,country:u==null?void 0:u.country}))],a}async function D(o){var e;const a=await s.findDetail(o);return f.value=(e=a==null?void 0:a.data)==null?void 0:e.data,a}async function P(){var e;r.value=!0;let o={...l};const a=await s.create(o);a!=null&&a.error&&alert((e=a==null?void 0:a.error)==null?void 0:e.message),L(),a!=null&&a.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),r.value=!1}async function T(){var e;r.value=!0;let o={...y};console.log("updateClub",y);const a=await s.update(o);a!=null&&a.error&&alert((e=a==null?void 0:a.error)==null?void 0:e.message),a!=null&&a.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),r.value=!1}function L(){Object.assign(l,{name:"",country_id:"",status:"",effectif:"",club_personel:[{name:"",last_name:"",function:"président",phone:"",email:""},{name:"",last_name:"",function:"secrétaire",phone:"",email:""},{name:"",last_name:"",function:"trésorier",phone:"",email:""}]})}return{all:x,club:f,clubs:c,newClub:l,create:P,isLoading:r,findDetail:D,allByFilter:k,updateClub:y,update:T}});export{j as u};
