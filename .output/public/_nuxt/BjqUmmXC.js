import{_ as N}from"./91L_qKA8.js";import{u as R,_ as B}from"./CaHcUY24.js";import{_ as z}from"./9jgPnQ7B.js";import{_ as T}from"./DDf9aVxR.js";import{_ as A}from"./DTxw8e_H.js";import{_ as E}from"./Dmsu5Csd.js";import{g as D,s as I,r as p,k as P,c as b,b as r,w as v,o as _,a as e,t as n,q as G,p as o,F as H,y as J,d as K}from"./7f7kRU4D.js";import{u as O}from"./trzqlB4U.js";import{u as Q}from"./BT9jjKtY.js";import{u as y}from"./D46wSHT8.js";import"./DjuaHcYr.js";const W={class:"w-full"},X={class:"w-full m-auto"},Y={class:"w-full p-2 mb-3"},Z={class:"text-sm font-semibold uppercase text-neutral-500"},ee={class:"w-full p-2"},le={class:"w-full flex items-start gap-2"},te={class:"w-full bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},oe={class:"space-y-2 mb-4 flex gap-2"},ae={class:"space-y-2 mb-4"},se={class:"mt-4 flex w-full flex-col justify-start gap-1"},ne={class:"text-sm my-4 font-semibold uppercase text-neutral-500"},re={class:"w-full bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},ue=["onClick"],de={class:"space-y-2 flex gap-1.5"},ie={class:"space-y-2"},ce={class:"space-y-2"},fe={class:"space-y-2"},me={class:"space-y-2 mb-4"},pe={class:"flex w-full flex-col justify-start gap-1"},be={class:"w-full grid items-center mt-3"},_e={class:"flex justify-between mt-4"},he={class:"inline-flex gap-2"},we={class:"sticky top-[20px] w-[350px] min-h-20 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},ve={class:"w-full flex mb-2 p-2 items-center justify-between"},ye={class:"w-full flex p-2 mb-2 items-center justify-between"},ge={class:"w-full flex p-2 mb-2 items-center justify-between"},Ne=D({__name:"create",setup(Ve){const{newFacture:d,removeRubrique:g,create:V,addRubrique:x,newRubrique:$}=y(),{isLoading:i,total_rubrique:q,total_quantity:U,total_amount:k}=I(y()),j=O();R(),Q();const c=p([]);p([]),p([]);const C=async l=>{let t=l.submitter.value==="send"?"send":"draft";await V(t)},L=()=>{if(d.club_id==""){alert("Veuillez selectionner un club");return}let l=c.value.find(t=>t.value==d.club_id);l&&x(l.effectif)},F=async()=>{var t;let l=await j.all();c.value=[...(t=l.data)==null?void 0:t.data.map((s,f)=>({label:s==null?void 0:s.name,value:s==null?void 0:s.id,effectif:s==null?void 0:s.effectif}))]};return P(async()=>{await Promise.all([F()])}),(l,t)=>{const s=N,f=B,m=z,M=T,h=A,S=E;return _(),b("div",null,[r(S,null,{default:v(()=>[e("div",W,[e("div",X,[e("div",Y,[e("h5",Z,n(l.$t("facture.form.title_new")),1)]),e("div",ee,[e("div",le,[e("form",{class:"flex-1",onSubmit:G(C,["prevent"])},[e("div",te,[e("div",oe,[r(s,{modelValue:o(d).club_id,"onUpdate:modelValue":t[0]||(t[0]=a=>o(d).club_id=a),options:o(c),label:l.$t("facture.form.label1"),required:"",placeholder:"Selectionner un club",name:"title"},null,8,["modelValue","options","label"])]),t[3]||(t[3]=e("div",{class:"space-y-2 mb-4 flex gap-1.5"},null,-1)),e("div",ae,[e("div",se,[t[2]||(t[2]=e("label",{class:"text-[13px] font-[500] text-zinc-700"},null,-1)),r(f,{required:"",modelValue:o(d).objet,"onUpdate:modelValue":t[1]||(t[1]=a=>o(d).objet=a),placeholder:l.$t("facture.form.label2"),label:l.$t("facture.form.label2"),rows:"4"},null,8,["modelValue","placeholder","label"])])])]),e("h5",ne,n(l.$t("facture.form.rubrique_title")),1),e("div",re,[(_(!0),b(H,null,J(o($),(a,w)=>(_(),b("div",{class:"w-full border-b border-b-gray-200",key:w},[e("button",{onClick:u=>o(g)(w),type:"button",class:"mt-2 mx-auto cursor-pointer text-[13px] rounded-lg border border-slate-200 bg-transparent p-2 shadow-xs transition-colors file:border-0 file:bg-transparent"},n(l.$t("facture.form.delete")),9,ue),e("div",de,[e("div",ie,[r(m,{required:"",modelValue:a.libele,"onUpdate:modelValue":u=>a.libele=u,label:l.$t("facture.form.label3"),placeholder:l.$t("facture.form.label3"),name:"title"},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])]),e("div",ce,[r(m,{required:"",modelValue:a.quantity,"onUpdate:modelValue":u=>a.quantity=u,type:"number",label:l.$t("facture.form.label4"),placeholder:l.$t("facture.form.label4"),name:"title"},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])]),e("div",fe,[r(m,{required:"",modelValue:a.amount,"onUpdate:modelValue":u=>a.amount=u,type:"number",label:l.$t("facture.form.label5"),placeholder:l.$t("facture.form.label5"),name:"title"},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])])]),e("div",me,[e("div",pe,[t[4]||(t[4]=e("label",{class:"text-[13px] font-[500] text-zinc-700"},null,-1)),r(f,{required:"",modelValue:a.comment,"onUpdate:modelValue":u=>a.comment=u,label:l.$t("facture.form.label6"),placeholder:l.$t("facture.form.label6"),rows:"3"},null,8,["modelValue","onUpdate:modelValue","label","placeholder"])])])]))),128)),e("div",be,[e("button",{onClick:L,type:"button",class:"mx-auto cursor-pointer text-[13px] rounded-lg border border-slate-200 bg-transparent p-2 shadow-xs transition-colors file:border-0 file:bg-transparent"},n(l.$t("facture.form.add_rubrique")),1)])]),e("div",_e,[r(M,{to:"/account/factures",class:"cursor-pointer inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50 text-slate-900 underline-offset-4 hover:underline h-11 px-4 py-2"},{default:v(()=>[K(n(l.$t("facture.form.cancel")),1)]),_:1}),e("div",he,[r(h,{value:"draft",class:"!bg-gray-100 !text-black border border-slate-200",type:"submit",name:"action",label:l.$t("facture.form.button_b"),isLoading:o(i)&&o(i)=="draft"},null,8,["label","isLoading"]),r(h,{name:"action",type:"submit",value:"send",label:l.$t("facture.form.button_new"),isLoading:o(i)&&o(i)=="send"},null,8,["label","isLoading"])])])],32),e("div",we,[e("div",ve,[e("span",null,n(l.$t("facture.form.rubrique")),1),e("span",null,n(o(q)),1)]),e("div",ye,[e("span",null,n(l.$t("facture.form.quantity")),1),e("span",null,n(o(U)),1)]),e("div",ge,[e("span",null,n(l.$t("facture.form.amount")),1),e("span",null,n(o(k)),1)])])])])])])]),_:1})])}}});export{Ne as default};
