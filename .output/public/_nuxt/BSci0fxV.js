import{y as R,z as y,r as C,G as b}from"./DY93oi3b.js";import{u as d}from"./C_gOdtv4.js";const x=R("rubrique",()=>{async function c(s){return await d(`/rubrique/all?${s.toString()}`)}async function i(s){return await d(`/rubrique/all/filter?${s.toString()}`)}async function o(s){return await d(`/rubrique/${s.id}/${s.uid}`)}async function l(s){return await d("/rubrique/create",{method:"POST",body:s})}async function f(s){return await d("/rubrique/update",{method:"put",body:s})}return{all:c,create:l,findDetail:o,allByFilter:i,update:f}}),P=R("RubriqueViewModel",()=>{const c=y({data:[],page:[]}),i=C(),o=C(!1),l=x();let f={libele:"",price:"",designation:"",status:"actif"};const s=y({...f}),q=y({...f,id:""});async function h(e=""){var n,t,r,p,w,g,S,v;const a=await l.allByFilter(e);return(t=(n=a.data)==null?void 0:n.data)==null||t.links.shift(),(p=(r=a.data)==null?void 0:r.data)==null||p.links.pop(),c.page=(g=(w=a.data)==null?void 0:w.data)==null?void 0:g.links,c.data=[...(v=(S=a.data)==null?void 0:S.data)==null?void 0:v.data.map((u,B)=>({code:u==null?void 0:u.code,id:u==null?void 0:u.id,uid:u==null?void 0:u.rubrique_uid,libele:u==null?void 0:u.libele,designation:u==null?void 0:u.designation,price:u==null?void 0:u.price,status:u==null?void 0:u.status}))],a}async function E(e=""){var n,t;const a=await l.all(e);return[...(t=(n=a.data)==null?void 0:n.data)==null?void 0:t.map((r,p)=>({code:r==null?void 0:r.code,id:r==null?void 0:r.id,uid:r==null?void 0:r.rubrique_uid,libele:r==null?void 0:r.libele,designation:r==null?void 0:r.designation,price:r==null?void 0:r.price,status:r==null?void 0:r.status}))],a}async function F(e){var n;const a=await l.findDetail(e);return i.value=(n=a==null?void 0:a.data)==null?void 0:n.data,a}async function $(){var n;o.value=!0;let e={...s};const a=await l.create(e);a!=null&&a.error&&alert((n=a==null?void 0:a.error)==null?void 0:n.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),o.value=!1}async function k(){var n;o.value=!0;let e={...q};const a=await l.update(e);a!=null&&a.error&&alert((n=a==null?void 0:a.error)==null?void 0:n.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),o.value=!1}return{all:E,rubrique:i,rubriques:c,newRubrique:s,create:$,isLoading:o,findDetail:F,allByFilter:h,updateRubrique:q,update:k}});export{P as u};
