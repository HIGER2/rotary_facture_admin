import{m as p,x as s,r as S,E as i}from"./DvIDVNoU.js";import{u as o}from"./D0nEMZxT.js";const h=p("payment",()=>{async function t(n){return await o(`/payment/all?${n.toString()}`)}async function c(n){return await o("/payment/create",{method:"POST",body:n})}async function u(n){return await o(`/payment/find/${n}`)}return{all:t,create:c,findWithPaiement:u}}),x=p("PaymentViewModel",()=>{const t=h(),c=s([]);s({});const u=s(!1),f=S({...{facture_id:"",facture_uid:"",amount:"",status:"",mode_paiement:""}});async function P(e){var d;const r=await t.all(e);c.value=[...(d=r.data)==null?void 0:d.data.map((a,v)=>{var l,y;return{reference:a==null?void 0:a.reference,club:((l=a==null?void 0:a.club)==null?void 0:l.name)||"N/A",fac:((y=a==null?void 0:a.facture)==null?void 0:y.reference)||"N/A",amount:a==null?void 0:a.amount,status:a==null?void 0:a.status,mode_paiement:a==null?void 0:a.mode_paiement,date:a==null?void 0:a.date}})]}async function w(e){u.value=!0;let r={...f,facture_id:e.id,facture_uid:e.facture_uid};await t.create(r),i("Opération éffectuée",{autoClose:1e3,type:i.TYPE.SUCCESS}),u.value=!1}async function _(e){await t.findWithPaiement(e)}return{all:P,create:w,findWithPaiement:_,newPayment:f,payments:c,isLoading:u}});export{x as u};
