import{_ as et,a as lt}from"./C4hicQg3.js";import{_ as M}from"./cC3oDVJf.js";import{_ as mt,a as dt}from"./DVqezoWu.js";import{_ as st}from"./BvFmEFWA.js";import{_ as at}from"./C-Cwrbu9.js";import{_ as N}from"./CAc3kerC.js";import{_ as S}from"./B07I-HvO.js";import{g as h,c as f,o as c,b as l,w as b,a as t,q as E,r as A,F as rt,p as s,j as ut,k as ct,C as V,l as tt,t as g}from"./CmxoKqvL.js";import{u as R}from"./UKepDVk9.js";import{_ as pt}from"./DE-ffkqz.js";import{_ as yt}from"./fQBpDcuR.js";import{u as gt}from"./B9nmw3pE.js";import"./BqdciN8u.js";const ft={class:"grid mt-4 w-full max-w-lg gap-4"},vt={class:"space-y-2 mb-4 flex gap-2"},bt={class:"space-y-2 mb-4"},nt=h({__name:"AddPaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},createPayment:{type:Function},isLoading:{type:Boolean},newPayment:{},optionMethode:{},optionStatus:{}},setup(x){return(e,n)=>{const o=at,r=N,p=M,u=S;return c(),f("div",null,[l(u,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:b(()=>[t("div",ft,[n[4]||(n[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:n[3]||(n[3]=E((...m)=>e.createPayment&&e.createPayment(...m),["prevent"]))},[t("div",vt,[l(o,{required:"",label:"Statut",modelValue:e.newPayment.status,"onUpdate:modelValue":n[0]||(n[0]=m=>e.newPayment.status=m),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),l(o,{required:"",modelValue:e.newPayment.mode_paiement,"onUpdate:modelValue":n[1]||(n[1]=m=>e.newPayment.mode_paiement=m),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",bt,[l(r,{required:"",modelValue:e.newPayment.amount,"onUpdate:modelValue":n[2]||(n[2]=m=>e.newPayment.amount=m),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),l(p,{label:"Créer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),_t={class:"grid mt-4 w-full max-w-lg gap-4"},xt={class:"space-y-2 mb-4"},ot=h({__name:"AddPaymentClubComponent",props:{isActive:{type:Boolean},setActive:{type:Function},processPayment:{type:Function},isLoading:{type:Boolean},paymentAmount:{}},setup(x){return(e,n)=>{const o=N,r=M,p=S;return c(),f("div",null,[l(p,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:b(()=>[t("div",_t,[n[2]||(n[2]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Effectué un paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:n[1]||(n[1]=E((...u)=>e.processPayment&&e.processPayment(...u),["prevent"]))},[t("div",xt,[l(o,{required:"",modelValue:e.paymentAmount.amount,"onUpdate:modelValue":n[0]||(n[0]=u=>e.paymentAmount.amount=u),min:"100",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),l(r,{label:"payé maintenant",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),Pt={class:"grid mt-4 w-full max-w-lg gap-4"},ht={class:"space-y-2 mb-4 flex gap-2"},wt={class:"space-y-2 mb-4"},it=h({__name:"UpdatePaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},updatePayment:{type:Function},isLoading:{type:Boolean},update:{},optionMethode:{},optionStatus:{}},setup(x){return(e,n)=>{const o=at,r=N,p=M,u=S;return c(),f("div",null,[l(u,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:b(()=>[t("div",Pt,[n[4]||(n[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:n[3]||(n[3]=E((...m)=>e.updatePayment&&e.updatePayment(...m),["prevent"]))},[t("div",ht,[l(o,{required:"",label:"Statut",modelValue:e.update.status,"onUpdate:modelValue":n[0]||(n[0]=m=>e.update.status=m),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),l(o,{required:"",modelValue:e.update.mode_paiement,"onUpdate:modelValue":n[1]||(n[1]=m=>e.update.mode_paiement=m),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",wt,[l(r,{required:"",modelValue:e.update.amount,"onUpdate:modelValue":n[2]||(n[2]=m=>e.update.amount=m),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),l(p,{label:"Enregistrer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),kt={class:"mt-4"},At={class:"px-4 sm:px-0 flex items-center justify-between"},Ct={class:"mt-6"},$t=["onClick"],Ut=h({__name:"PaymentComponent",props:{payments:{},facture:{},user:{},handleListe:{type:Function}},setup(x){const e=R(),n=x,o=A(!1),r=A(!1),p=A(!1),u=i=>{r.value=i},m=i=>{o.value=i},y=i=>{p.value=i},w=i=>{e.updatePayment.status=i==null?void 0:i.status,e.updatePayment.mode_paiement=i==null?void 0:i.mode_paiement,e.updatePayment.id=i==null?void 0:i.id,e.updatePayment.amount=i==null?void 0:i.amount,u(!0)},k=async i=>{await e.create(i),n.handleListe()},d=async i=>{await Promise.all([e.processePayment(i),n.handleListe()])},a=async()=>{await Promise.all([e.update(),n.handleListe()])},B={admin:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"},{label:"action",key:"action"}],club:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"}]},U=[{label:"en attente",status:"en attente"},{label:"payé",status:"payée"},{label:"échec",status:"échec"},{label:"annulé",status:"annulé"}],F=[{label:"espèces",status:"espèces"},{label:"chèque",status:"chèque"},{label:"mobile money",status:"mobile money"},{label:"virement",status:"virement"},{label:"carte",status:"carte"}];return(i,_)=>{var C,$;const j=st,T=et,P=nt,q=ot,L=it;return c(),f("section",kt,[t("div",At,[_[1]||(_[1]=t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Paiements",-1)),((C=i.user)==null?void 0:C.role)=="admin"?(c(),f(rt,{key:0},[],64)):(c(),f("button",{key:1,type:"button",onClick:_[0]||(_[0]=v=>y(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none text-xs disabled:opacity-50 bg-[#1F2923] text-slate-50 shadow hover:bg-[#2f3a34] px-4 py-3 self-start"}," Effectué un paiement "))]),t("div",Ct,[l(T,{columns:B[($=i.user)==null?void 0:$.role],data:i.payments},{status:b(({item:v})=>[l(j,{status:v==null?void 0:v.status},null,8,["status"])]),action:b(({item:v})=>[t("button",{type:"button",onClick:D=>w(v),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},_[2]||(_[2]=[t("i",{class:"uil uil-pen"},null,-1)]),8,$t)]),_:1},8,["columns","data"])]),l(P,{"is-active":s(o),"set-active":m,"option-status":U,newPayment:s(e).newPayment,"option-methode":F,createPayment:()=>k(i.facture),"is-loading":s(e).isLoading},null,8,["is-active","newPayment","createPayment","is-loading"]),l(q,{"is-active":s(p),"set-active":y,paymentAmount:s(e).paymentAmount,processPayment:()=>d(i.facture),"is-loading":s(e).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"]),l(L,{"is-active":s(r),"set-active":u,"option-status":U,update:s(e).updatePayment,"option-methode":F,updatePayment:a,"is-loading":s(e).isLoading},null,8,["is-active","update","is-loading"])])}}}),Ft=h({__name:"CheckPaymentComponent",props:{isActive:{type:Boolean}},setup(x){return(e,n)=>{const o=S;return c(),f("div",null,[l(o,{isActive:e.isActive},{default:b(()=>n[0]||(n[0]=[t("div",{class:"grid mt-4 w-full max-w-lg gap-4"},[t("div",{class:"min-w-[370px] w-auto"},[t("a",{href:"#",class:"flex items-center justify-center"},[t("img",{alt:"logo",fetchpriority:"high",width:"120",height:"28.422",class:"mb-5",src:pt,style:{color:"transparent"}})]),t("div",{class:"rounded-xl w-full"},[t("div",{class:"flex flex-col space-y-1.5 p-6 px-2 sm:px-6"},[t("h3",{class:"font-semibold text-center tracking-tight text-xl"}," Vérification du paiement "),t("div",{class:"flex items-center justify-center"},[t("div",{class:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})])])])])],-1)])),_:1},8,["isActive"])])}}}),qt={class:"mt-4"},Lt={class:"mt-6"},Vt=["onClick"],Mt=h({__name:"RubriqueComponent",props:{rubriques:{},facture:{},user:{}},setup(x){const e=R(),n={admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],club:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}]};return(o,r)=>{var k;const p=st,u=et,m=nt,y=ot,w=it;return c(),f("section",qt,[r[1]||(r[1]=t("div",{class:"px-4 sm:px-0 flex items-center justify-between"},[t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Rubriques")],-1)),t("div",Lt,[l(u,{columns:n[(k=o.user)==null?void 0:k.role],data:o.rubriques},{status:b(({item:d})=>[l(p,{status:d==null?void 0:d.status},null,8,["status"])]),action:b(({item:d})=>[t("button",{type:"button",onClick:a=>o.setUpdate(d),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},r[0]||(r[0]=[t("i",{class:"uil uil-pen"},null,-1)]),8,Vt)]),_:1},8,["columns","data"])]),l(m,{"is-active":o.isActive,"set-active":o.setActive,"option-status":o.optionStatus,newPayment:s(e).newPayment,"option-methode":o.optionMethode,createPayment:()=>o.createPayment(o.facture),"is-loading":s(e).isLoading},null,8,["is-active","set-active","option-status","newPayment","option-methode","createPayment","is-loading"]),l(y,{"is-active":o.isActiveClub,"set-active":o.setActiveClub,paymentAmount:s(e).paymentAmount,processPayment:()=>o.processPayment(o.facture),"is-loading":s(e).isLoading},null,8,["is-active","set-active","paymentAmount","processPayment","is-loading"]),l(w,{"is-active":o.isActiveUpdate,"set-active":o.setActiveUpdate,"option-status":o.optionStatus,update:s(e).updatePayment,"option-methode":o.optionMethode,updatePayment:o.updatePayment,"is-loading":s(e).isLoading},null,8,["is-active","set-active","option-status","update","option-methode","updatePayment","is-loading"])])}}}),St={key:1,class:"w-full p-2"},Bt={class:"w-full"},jt={class:"px-4 sm:px-0"},Tt={class:"flex items-center justify-between"},Dt={class:"mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},Nt={class:"divide-y divide-gray-100"},Et={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Rt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},zt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},It={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Gt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Ot={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Wt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Ht={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Jt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Kt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Qt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Xt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Yt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Zt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},te={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},ee={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},se={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},ae={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ne={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},oe={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ie={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},le={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},me={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},de={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},re={class:"inline-flex my-5 cursor-pointer h-10 items-center justify-center rounded-lg bg-slate-100 p-2 text-slate-500 dark:bg-slate-800 dark:text-slate-400",tabindex:"0","data-orientation":"horizontal",style:{outline:"none"}},ue=["data-state"],ce=["data-state"],Ce=h({__name:"[slug]",setup(x){const e=gt(),n=R(),o=ut(),r=A(!1),p=A(!1),u=async()=>{var d;await e.findWithPaiement((d=o==null?void 0:o.params)==null?void 0:d.slug),p.value=!1},m=async d=>{await e.sendFacture(d),await u()},y=A(1),w=d=>{y.value=d},k=async d=>{r.value=!0,await n.checkPayment({TransactionToken:d}),r.value=!1};return ct(()=>{var d,a;u(),Object.keys(o.query).length>0&&((d=o.query)!=null&&d.TransactionToken)&&k((a=o.query)==null?void 0:a.TransactionToken)}),(d,a)=>{const B=lt,U=M,F=mt,i=dt,_=Ut,j=Ft,T=yt;return c(),f("div",null,[l(T,null,{default:b(({userConnected:P})=>{var q,L,C,$,v,D,z,I,G,O,W,H,J,K,Q,X;return[s(p)?(c(),V(B,{key:0})):(c(),f("div",St,[t("section",Bt,[t("div",jt,[a[4]||(a[4]=t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Général",-1)),t("div",Tt,[a[3]||(a[3]=t("p",{class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},"Détail de la facture",-1)),((q=s(e).facture)==null?void 0:q.status)==="brouillon"&&(P==null?void 0:P.role)!=="club"?(c(),V(U,{key:0,onClick:a[0]||(a[0]=Y=>{var Z;return m((Z=s(e).facture)==null?void 0:Z.reference)}),type:"button",class:"max-w-max",label:"Envoyer la facture",isLoading:s(e).isLoading},null,8,["isLoading"])):tt("",!0)])]),t("div",Dt,[t("dl",Nt,[t("div",Et,[a[5]||(a[5]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," N°Facture ",-1)),t("div",Rt,g((L=s(e).facture)==null?void 0:L.reference),1)]),t("div",zt,[a[6]||(a[6]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Total rubrique ",-1)),t("div",It,g((C=s(e).facture)==null?void 0:C.total_rubrique),1)]),t("div",Gt,[a[7]||(a[7]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Total quantité ",-1)),t("div",Ot,g(($=s(e).facture)==null?void 0:$.total_quantity),1)]),t("div",Wt,[a[8]||(a[8]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Montant total ",-1)),t("div",Ht,g((v=s(e).facture)==null?void 0:v.amount),1)]),t("div",Jt,[a[9]||(a[9]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Montant payé ",-1)),t("div",Kt,g((D=s(e).facture)==null?void 0:D.amount_pay),1)]),t("div",Qt,[a[10]||(a[10]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Reste à payer ",-1)),t("div",Xt,g((z=s(e).facture)==null?void 0:z.remaining_amount),1)]),t("div",Yt,[a[11]||(a[11]=t("dt",{class:"text-sm font-medium leading-6 text-gray-900"}," Type ",-1)),t("div",Zt,[l(F,{status:(I=s(e).facture)==null?void 0:I.type},null,8,["status"])])]),t("div",te,[a[12]||(a[12]=t("dt",{class:"text-sm font-medium leading-6 text-gray-900"}," Statut ",-1)),t("div",ee,[l(i,{status:(G=s(e).facture)==null?void 0:G.status},null,8,["status"])])]),t("div",se,[a[13]||(a[13]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Description ",-1)),t("div",ae,g((O=s(e).facture)==null?void 0:O.objet),1)]),t("div",ne,[a[14]||(a[14]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Club ",-1)),t("div",oe,g((H=(W=s(e).facture)==null?void 0:W.club)==null?void 0:H.name),1)]),t("div",ie,[a[15]||(a[15]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Date ",-1)),t("div",le,g((J=s(e).facture)==null?void 0:J.date_emission),1)]),t("div",me,[a[16]||(a[16]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," date échéance ",-1)),t("div",de,g((K=s(e).facture)==null?void 0:K.date_echeance),1)])])])]),t("div",re,[t("button",{onClick:a[1]||(a[1]=Y=>w(1)),type:"button","data-state":s(y)==1&&"active",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 dark:data-[state=active]:bg-slate-950 dark:data-[state=active]:text-slate-50",tabindex:"-1","data-orientation":"horizontal","data-radix-collection-item":""}," Paiements ",8,ue),t("button",{onClick:a[2]||(a[2]=Y=>w(2)),"data-state":s(y)==2&&"active",type:"button",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 dark:data-[state=active]:bg-slate-950 dark:data-[state=active]:text-slate-50",tabindex:"0","data-orientation":"horizontal","data-radix-collection-item":""}," Rubriques ",8,ce)]),s(y)==1?(c(),V(_,{key:0,user:P,payments:(Q=s(e).facture)==null?void 0:Q.payments,facture:s(e).facture,handleListe:u},null,8,["user","payments","facture"])):s(y)==2?(c(),V(s(Mt),{key:1,user:P,rubriques:(X=s(e).facture)==null?void 0:X.rubriques,facture:s(e).facture},null,8,["user","rubriques","facture"])):tt("",!0),l(j,{isActive:s(r)},null,8,["isActive"])]))]}),_:1})])}}});export{Ce as default};
