import{z as v,A as g,r as b,G as x}from"./DZchtIta.js";import{u as l}from"./qvOv5KBm.js";const B=v("exercice",()=>{async function o(r){return await l(`/exercice/all?${r.toString()}`)}async function i(r){return await l(`/exercice/all/filter?${r.toString()}`)}async function t(r){return await l(`/exercice/${r.id}/${r.uid}`)}async function u(r){return await l("/exercice/create",{method:"POST",body:r})}async function f(r){return await l("/exercice/update",{method:"put",body:r})}return{all:o,create:u,findDetail:t,allByFilter:i,update:f}}),T=v("ExerciceViewModel",()=>{const o=g({data:[],page:[]}),i=b(),t=b(!1),u=B();let f={annee:"",begin_date:"",end_date:"",status:"en_cours"};const r=g({...f}),p=g({...f,id:""});async function C(s=""){var c,d,e,y,w,_,E,S;const a=await u.allByFilter(s);return(d=(c=a.data)==null?void 0:c.data)==null||d.links.shift(),(y=(e=a.data)==null?void 0:e.data)==null||y.links.pop(),o.page=(_=(w=a.data)==null?void 0:w.data)==null?void 0:_.links,o.data=[...(S=(E=a.data)==null?void 0:E.data)==null?void 0:S.data.map((n,D)=>({id:n==null?void 0:n.id,uid:n==null?void 0:n.exercice_uid,annee:n==null?void 0:n.annee,begin_date:n==null?void 0:n.begin_date,end_date:n==null?void 0:n.end_date,status:n==null?void 0:n.status}))],a}async function h(s=""){var c,d;const a=await u.all(s);return[...(d=(c=a.data)==null?void 0:c.data)==null?void 0:d.map((e,y)=>({id:e==null?void 0:e.id,uid:e==null?void 0:e.exercice_uid,annee:e==null?void 0:e.annee,begin_date:e==null?void 0:e.begin_date,end_date:e==null?void 0:e.end_date,status:e==null?void 0:e.status}))],a}async function F(s){var c;const a=await u.findDetail(s);return i.value=(c=a==null?void 0:a.data)==null?void 0:c.data,a}async function $(){var c;t.value=!0;let s={...r};const a=await u.create(s);a!=null&&a.error&&alert((c=a==null?void 0:a.error)==null?void 0:c.message),a!=null&&a.data&&x("Opération éffectuée",{autoClose:1e3,type:x.TYPE.SUCCESS}),t.value=!1}async function k(){var c;t.value=!0;let s={...p};console.log("updateExercice",p);const a=await u.update(s);a!=null&&a.error&&alert((c=a==null?void 0:a.error)==null?void 0:c.message),a!=null&&a.data&&x("Opération éffectuée",{autoClose:1e3,type:x.TYPE.SUCCESS}),t.value=!1}return{all:h,exercice:i,exercices:o,newExercice:r,create:$,isLoading:t,findDetail:F,allByFilter:C,updateExercice:p,update:k}});export{T as u};
