import{a as R}from"./BuacfXMz.js";import{_ as E}from"./DyYL-ui7.js";import{_ as S,a as I}from"./C6UWM4qB.js";import{_ as O}from"./B1kx8xWt.js";import{u as W}from"./A6eIA9EX.js";import{u as G}from"./B2N7Caxz.js";import{f as H,h as J,I as K,r as v,i as Q,c as l,b as q,w as X,o as i,z as d,l as t,a,j as A,t as r,F as C,q as F,A as L}from"./CB58tbNn.js";import{U as Y}from"./DIIv37rX.js";import{_ as Z}from"./D5jZSviT.js";import{_ as ee,a as te}from"./B8H7ImXD.js";import"./Ca6fDNaQ.js";import"./Dm2QMz6-.js";import"./vDtiO1XD.js";import"./CztG9CjI.js";import"./DO66mw8L.js";const ae={key:1,class:"w-full p-2"},se={class:"w-full"},ne={class:"px-4 sm:px-0"},ie={class:"text-base font-semibold leading-7 text-gray-900"},oe={class:"flex items-center justify-between"},le={class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},re={class:"w-full flex gap-3 items-center"},ce={class:"w-full mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},ue={class:"divide-y divide-gray-100"},de={class:"text-sm font-medium leading-6 text-gray-900"},me={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},fe={key:1},pe={class:"w-full mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},_e={class:"divide-y divide-gray-100"},ye={class:"text-sm font-medium leading-6 text-gray-900"},be={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ge={key:1},ve={class:"inline-flex my-5 cursor-pointer h-10 items-center justify-center rounded-lg bg-slate-100 p-2 text-slate-500",tabindex:"0","data-orientation":"horizontal",style:{outline:"none"}},he=["data-state"],ke=["data-state"],Ue=H({__name:"[slug]",setup(xe){const o=W(),T=G(),c=J(),j=K(),b=v(!1),h=v(!1),{formatNumber:P}=Y(),y=async()=>{var e;await o.findWithPaiement((e=c==null?void 0:c.params)==null?void 0:e.slug),h.value=!1},V=async e=>{await o.sendFacture(e),await y()},m=v(1),k=e=>{m.value=e},D=async e=>{b.value=!0,await T.checkPayment({TransactionToken:e}),await y(),j.replace({query:{}}),b.value=!1},x={left:[{label:"facture.detail.label1",key:"reference"},{label:"facture.detail.label2",key:"total_rubrique"},{label:"facture.detail.label3",key:"total_quantity"},{label:"facture.detail.label4",key:"amount"},{label:"facture.detail.label5",key:"amount_pay"},{label:"facture.detail.label6",key:"remaining_amount"}],right:[{label:"facture.detail.label7",key:"status",isComponent:ee},{label:"facture.detail.label8",key:"status_payment",isComponent:te},{label:"facture.detail.label9",key:"objet"},{label:"facture.detail.label10",key:"club.name"},{label:"facture.detail.label11",key:"date_emission"},{label:"facture.detail.label12",key:"date_echeance"}]};function f(e,s){return s.split(".").reduce((p,g)=>p==null?void 0:p[g],e)}function B(e){return e?new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A"}const w=(e,s)=>{switch(e){case"date_emission":case"date_echeance":return B(f(s,e));case"amount":case"amount_pay":case"remaining_amount":case"total_quantity":return P(f(s,e));default:return f(s,e)||"N/A"}};return Q(()=>{var e,s;y(),Object.keys(c.query).length>0&&((e=c.query)!=null&&e.TransactionToken)&&D((s=c.query)==null?void 0:s.TransactionToken)}),(e,s)=>{const p=R,g=E,z=I,U=S,M=O;return i(),l("div",null,[q(M,null,{default:X(({userConnected:_})=>{var $,N;return[t(h)?(i(),d(p,{key:0})):(i(),l("div",ae,[a("section",se,[a("div",ne,[a("h3",ie,r(e.$t("facture.detail.title")),1),a("div",oe,[a("p",le,r(e.$t("facture.detail.desc")),1),(_==null?void 0:_.role)!=="club"?(i(),d(g,{key:0,onClick:s[0]||(s[0]=n=>{var u;return V((u=t(o).facture)==null?void 0:u.reference)}),type:"button",class:"max-w-max",label:"Envoyer la facture",isLoading:t(o).isLoading},null,8,["isLoading"])):A("",!0)])]),a("div",re,[a("div",ce,[a("div",ue,[(i(!0),l(C,null,F(x.left,(n,u)=>(i(),l("div",{key:u,class:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},[a("div",de,r(e.$t(n.label)),1),a("div",me,[n.isComponent?(i(),d(L(n.isComponent),{key:0,status:f(t(o).facture,n.key)||"N/A"},null,8,["status"])):(i(),l("span",fe,r(w(n.key,t(o).facture)||"N/A"),1))])]))),128))])]),a("div",pe,[a("div",_e,[(i(!0),l(C,null,F(x.right,(n,u)=>(i(),l("div",{key:u,class:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},[a("div",ye,r(e.$t(n.label)),1),a("div",be,[n.isComponent?(i(),d(L(n.isComponent),{key:0,status:f(t(o).facture,n.key)||"N/A"},null,8,["status"])):(i(),l("span",ge,r(w(n.key,t(o).facture)||"N/A"),1))])]))),128))])])])]),a("div",ve,[a("button",{onClick:s[1]||(s[1]=n=>k(1)),type:"button","data-state":t(m)==1&&"active",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:focus-visible:ring-slate-300",tabindex:"-1","data-orientation":"horizontal","data-radix-collection-item":""},r(e.$t("facture.detail.tab.tab1")),9,he),a("button",{onClick:s[2]||(s[2]=n=>k(2)),"data-state":t(m)==2&&"active",type:"button",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:focus-visible:ring-slate-300",tabindex:"0","data-orientation":"horizontal","data-radix-collection-item":""},r(e.$t("facture.detail.tab.tab2")),9,ke)]),t(m)==1?(i(),d(z,{key:0,user:_,payments:($=t(o).facture)==null?void 0:$.payments,facture:t(o).facture,handleListe:y},null,8,["user","payments","facture"])):t(m)==2?(i(),d(t(Z),{key:1,user:_,rubriques:(N=t(o).facture)==null?void 0:N.rubriques,facture:t(o).facture},null,8,["user","rubriques","facture"])):A("",!0),q(U,{isActive:t(b)},null,8,["isActive"])]))]}),_:1})])}}});export{Ue as default};
