import{_ as st,a as ot}from"./B-XounCc.js";import{_ as L}from"./BLQiuVQI.js";import{_ as it,a as lt}from"./DU41i_7f.js";import{_ as at}from"./CnEwH38b.js";import{_ as nt}from"./C1JVXH0v.js";import{_ as N}from"./DGml0eJ9.js";import{_ as M}from"./BXMq8l7c.js";import{g as w,c as g,o as c,b as l,w as b,a as t,q as R,r as h,F as mt,p as n,j as dt,H as rt,k as ut,C as V,l as et,t as y}from"./BaBDG9Hc.js";import{u as E}from"./CVHXicBx.js";import{_ as ct}from"./DErDPeW1.js";import{_ as pt}from"./CjM3_890.js";import{u as yt}from"./fTS7o-iZ.js";import"./D9PkUd2M.js";const gt={class:"grid mt-4 w-full max-w-lg gap-4"},ft={class:"space-y-2 mb-4 flex gap-2"},bt={class:"space-y-2 mb-4"},vt=w({__name:"AddPaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},createPayment:{type:Function},isLoading:{type:Boolean},newPayment:{},optionMethode:{},optionStatus:{}},setup(_){return(e,s)=>{const m=nt,p=N,r=L,d=M;return c(),g("div",null,[l(d,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:b(()=>[t("div",gt,[s[4]||(s[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:s[3]||(s[3]=R((...i)=>e.createPayment&&e.createPayment(...i),["prevent"]))},[t("div",ft,[l(m,{required:"",label:"Statut",modelValue:e.newPayment.status,"onUpdate:modelValue":s[0]||(s[0]=i=>e.newPayment.status=i),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),l(m,{required:"",modelValue:e.newPayment.mode_paiement,"onUpdate:modelValue":s[1]||(s[1]=i=>e.newPayment.mode_paiement=i),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",bt,[l(p,{required:"",modelValue:e.newPayment.amount,"onUpdate:modelValue":s[2]||(s[2]=i=>e.newPayment.amount=i),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),l(r,{label:"Créer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),_t={class:"grid mt-4 w-full max-w-lg gap-4"},xt={class:"space-y-2 mb-4"},kt=w({__name:"AddPaymentClubComponent",props:{isActive:{type:Boolean},setActive:{type:Function},processPayment:{type:Function},isLoading:{type:Boolean},paymentAmount:{}},setup(_){return(e,s)=>{const m=N,p=L,r=M;return c(),g("div",null,[l(r,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:b(()=>[t("div",_t,[s[2]||(s[2]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Effectué un paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:s[1]||(s[1]=R((...d)=>e.processPayment&&e.processPayment(...d),["prevent"]))},[t("div",xt,[l(m,{required:"",modelValue:e.paymentAmount.amount,"onUpdate:modelValue":s[0]||(s[0]=d=>e.paymentAmount.amount=d),min:"100",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),l(p,{label:"payé maintenant",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),wt={class:"grid mt-4 w-full max-w-lg gap-4"},ht={class:"space-y-2 mb-4 flex gap-2"},Pt={class:"space-y-2 mb-4"},At=w({__name:"UpdatePaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},updatePayment:{type:Function},isLoading:{type:Boolean},update:{},optionMethode:{},optionStatus:{}},setup(_){return(e,s)=>{const m=nt,p=N,r=L,d=M;return c(),g("div",null,[l(d,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:b(()=>[t("div",wt,[s[4]||(s[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:s[3]||(s[3]=R((...i)=>e.updatePayment&&e.updatePayment(...i),["prevent"]))},[t("div",ht,[l(m,{required:"",label:"Statut",modelValue:e.update.status,"onUpdate:modelValue":s[0]||(s[0]=i=>e.update.status=i),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),l(m,{required:"",modelValue:e.update.mode_paiement,"onUpdate:modelValue":s[1]||(s[1]=i=>e.update.mode_paiement=i),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",Pt,[l(p,{required:"",modelValue:e.update.amount,"onUpdate:modelValue":s[2]||(s[2]=i=>e.update.amount=i),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),l(r,{label:"Enregistrer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),$t={class:"mt-4"},qt={class:"px-4 sm:px-0 flex items-center justify-between"},Ct={class:"mt-6"},Ut=["onClick"],Ft=w({__name:"PaymentComponent",props:{payments:{},facture:{},user:{},handleListe:{type:Function}},setup(_){const e=E(),s=_,m=h(!1),p=h(!1),r=h(!1),d=o=>{p.value=o},i=o=>{m.value=o},P=o=>{r.value=o},x=o=>{e.updatePayment.status=o==null?void 0:o.status,e.updatePayment.mode_paiement=o==null?void 0:o.mode_paiement,e.updatePayment.id=o==null?void 0:o.id,e.updatePayment.amount=o==null?void 0:o.amount,d(!0)},q=async o=>{await e.create(o),s.handleListe()},S=async o=>{await Promise.all([e.processePayment(o),s.handleListe()])},u=async()=>{await Promise.all([e.update(),s.handleListe()])},a={admin:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"},{label:"action",key:"action"}],super_admin:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"},{label:"action",key:"action"}],club:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"}]},C=[{label:"en attente",status:"en attente"},{label:"payé",status:"payée"},{label:"échec",status:"échec"},{label:"annulé",status:"annulé"}],U=[{label:"espèces",status:"espèces"},{label:"chèque",status:"chèque"},{label:"mobile money",status:"mobile money"},{label:"virement",status:"virement"},{label:"carte",status:"carte"}];return(o,v)=>{var A,$;const B=at,j=st,T=vt,k=kt,F=At;return c(),g("section",$t,[t("div",qt,[v[1]||(v[1]=t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Paiements",-1)),((A=o.user)==null?void 0:A.role)=="admin"?(c(),g(mt,{key:0},[],64)):(c(),g("button",{key:1,type:"button",onClick:v[0]||(v[0]=f=>P(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none text-xs disabled:opacity-50 bg-[#1F2923] text-slate-50 shadow hover:bg-[#2f3a34] px-4 py-3 self-start"}," Effectué un paiement "))]),t("div",Ct,[l(j,{columns:a[($=o.user)==null?void 0:$.role],data:o.payments},{status:b(({item:f})=>[l(B,{status:f==null?void 0:f.status},null,8,["status"])]),action:b(({item:f})=>[t("button",{type:"button",onClick:D=>x(f),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},v[2]||(v[2]=[t("i",{class:"uil uil-pen"},null,-1)]),8,Ut)]),_:1},8,["columns","data"])]),l(T,{"is-active":n(m),"set-active":i,"option-status":C,newPayment:n(e).newPayment,"option-methode":U,createPayment:()=>q(o.facture),"is-loading":n(e).isLoading},null,8,["is-active","newPayment","createPayment","is-loading"]),l(k,{"is-active":n(r),"set-active":P,paymentAmount:n(e).paymentAmount,processPayment:()=>S(o.facture),"is-loading":n(e).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"]),l(F,{"is-active":n(p),"set-active":d,"option-status":C,update:n(e).updatePayment,"option-methode":U,updatePayment:u,"is-loading":n(e).isLoading},null,8,["is-active","update","is-loading"])])}}}),Vt=w({__name:"CheckPaymentComponent",props:{isActive:{type:Boolean}},setup(_){return(e,s)=>{const m=M;return c(),g("div",null,[l(m,{isActive:e.isActive},{default:b(()=>s[0]||(s[0]=[t("div",{class:"grid mt-4 w-full max-w-lg gap-4"},[t("div",{class:"min-w-[370px] w-auto"},[t("a",{href:"#",class:"flex items-center justify-center"},[t("img",{alt:"logo",fetchpriority:"high",width:"120",height:"28.422",class:"mb-5",src:ct,style:{color:"transparent"}})]),t("div",{class:"rounded-xl w-full"},[t("div",{class:"flex flex-col space-y-1.5 p-6 px-2 sm:px-6"},[t("h3",{class:"font-semibold text-center tracking-tight text-xl"}," Vérification du paiement "),t("div",{class:"flex items-center justify-center"},[t("div",{class:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})])])])])],-1)])),_:1},8,["isActive"])])}}}),Lt={class:"mt-4"},Mt={class:"mt-6"},St=["onClick"],Bt=w({__name:"RubriqueComponent",props:{rubriques:{},facture:{},user:{}},setup(_){E();const e={admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],super_admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],club:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}]};return(s,m)=>{var d;const p=at,r=st;return c(),g("section",Lt,[m[1]||(m[1]=t("div",{class:"px-4 sm:px-0 flex items-center justify-between"},[t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Rubriques")],-1)),t("div",Mt,[l(r,{columns:e[(d=s.user)==null?void 0:d.role],data:s.rubriques},{status:b(({item:i})=>[l(p,{status:i==null?void 0:i.status},null,8,["status"])]),action:b(({item:i})=>[t("button",{type:"button",onClick:P=>s.setUpdate(i),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},m[0]||(m[0]=[t("i",{class:"uil uil-pen"},null,-1)]),8,St)]),_:1},8,["columns","data"])])])}}}),jt={key:1,class:"w-full p-2"},Tt={class:"w-full"},Dt={class:"px-4 sm:px-0"},Nt={class:"flex items-center justify-between"},Rt={class:"mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},Et={class:"divide-y divide-gray-100"},zt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},It={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Gt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Ht={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Ot={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Wt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Jt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Kt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Qt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Xt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Yt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Zt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},te={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},ee={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},se={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},ae={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ne={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},oe={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ie={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},le={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},me={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},de={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},re={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},ue={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ce={class:"inline-flex my-5 cursor-pointer h-10 items-center justify-center rounded-lg bg-slate-100 p-2 text-slate-500 dark:bg-slate-800 dark:text-slate-400",tabindex:"0","data-orientation":"horizontal",style:{outline:"none"}},pe=["data-state"],ye=["data-state"],Ce=w({__name:"[slug]",setup(_){const e=yt(),s=E(),m=dt(),p=rt(),r=h(!1),d=h(!1),i=async()=>{var u;await e.findWithPaiement((u=m==null?void 0:m.params)==null?void 0:u.slug),d.value=!1},P=async u=>{await e.sendFacture(u),await i()},x=h(1),q=u=>{x.value=u},S=async u=>{r.value=!0,await s.checkPayment({TransactionToken:u}),await i(),p.replace({query:{}}),r.value=!1};return ut(()=>{var u,a;i(),Object.keys(m.query).length>0&&((u=m.query)!=null&&u.TransactionToken)&&S((a=m.query)==null?void 0:a.TransactionToken)}),(u,a)=>{const C=ot,U=L,o=it,v=lt,B=Ft,j=Vt,T=pt;return c(),g("div",null,[l(T,null,{default:b(({userConnected:k})=>{var F,A,$,f,D,z,I,G,H,O,W,J,K,Q,X,Y;return[n(d)?(c(),V(C,{key:0})):(c(),g("div",jt,[t("section",Tt,[t("div",Dt,[a[4]||(a[4]=t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Général",-1)),t("div",Nt,[a[3]||(a[3]=t("p",{class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},"Détail de la facture",-1)),((F=n(e).facture)==null?void 0:F.status)==="brouillon"&&(k==null?void 0:k.role)!=="club"?(c(),V(U,{key:0,onClick:a[0]||(a[0]=Z=>{var tt;return P((tt=n(e).facture)==null?void 0:tt.reference)}),type:"button",class:"max-w-max",label:"Envoyer la facture",isLoading:n(e).isLoading},null,8,["isLoading"])):et("",!0)])]),t("div",Rt,[t("dl",Et,[t("div",zt,[a[5]||(a[5]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," N°Facture ",-1)),t("div",It,y((A=n(e).facture)==null?void 0:A.reference),1)]),t("div",Gt,[a[6]||(a[6]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Total rubrique ",-1)),t("div",Ht,y(($=n(e).facture)==null?void 0:$.total_rubrique),1)]),t("div",Ot,[a[7]||(a[7]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Total quantité ",-1)),t("div",Wt,y((f=n(e).facture)==null?void 0:f.total_quantity),1)]),t("div",Jt,[a[8]||(a[8]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Montant total ",-1)),t("div",Kt,y((D=n(e).facture)==null?void 0:D.amount),1)]),t("div",Qt,[a[9]||(a[9]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Montant payé ",-1)),t("div",Xt,y((z=n(e).facture)==null?void 0:z.amount_pay),1)]),t("div",Yt,[a[10]||(a[10]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Reste à payer ",-1)),t("div",Zt,y((I=n(e).facture)==null?void 0:I.remaining_amount),1)]),t("div",te,[a[11]||(a[11]=t("dt",{class:"text-sm font-medium leading-6 text-gray-900"}," Type ",-1)),t("div",ee,[l(o,{status:(G=n(e).facture)==null?void 0:G.type},null,8,["status"])])]),t("div",se,[a[12]||(a[12]=t("dt",{class:"text-sm font-medium leading-6 text-gray-900"}," Statut ",-1)),t("div",ae,[l(v,{status:(H=n(e).facture)==null?void 0:H.status},null,8,["status"])])]),t("div",ne,[a[13]||(a[13]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Description ",-1)),t("div",oe,y((O=n(e).facture)==null?void 0:O.objet),1)]),t("div",ie,[a[14]||(a[14]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Club ",-1)),t("div",le,y((J=(W=n(e).facture)==null?void 0:W.club)==null?void 0:J.name),1)]),t("div",me,[a[15]||(a[15]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Date ",-1)),t("div",de,y((K=n(e).facture)==null?void 0:K.date_emission),1)]),t("div",re,[a[16]||(a[16]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," date échéance ",-1)),t("div",ue,y((Q=n(e).facture)==null?void 0:Q.date_echeance),1)])])])]),t("div",ce,[t("button",{onClick:a[1]||(a[1]=Z=>q(1)),type:"button","data-state":n(x)==1&&"active",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 dark:data-[state=active]:bg-slate-950 dark:data-[state=active]:text-slate-50",tabindex:"-1","data-orientation":"horizontal","data-radix-collection-item":""}," Paiements ",8,pe),t("button",{onClick:a[2]||(a[2]=Z=>q(2)),"data-state":n(x)==2&&"active",type:"button",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 dark:data-[state=active]:bg-slate-950 dark:data-[state=active]:text-slate-50",tabindex:"0","data-orientation":"horizontal","data-radix-collection-item":""}," Rubriques ",8,ye)]),n(x)==1?(c(),V(B,{key:0,user:k,payments:(X=n(e).facture)==null?void 0:X.payments,facture:n(e).facture,handleListe:i},null,8,["user","payments","facture"])):n(x)==2?(c(),V(n(Bt),{key:1,user:k,rubriques:(Y=n(e).facture)==null?void 0:Y.rubriques,facture:n(e).facture},null,8,["user","rubriques","facture"])):et("",!0),l(j,{isActive:n(r)},null,8,["isActive"])]))]}),_:1})])}}});export{Ce as default};
