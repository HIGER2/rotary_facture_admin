import{G as C,H as l,z as S,r as x,I as v}from"./CvSWjzOv.js";const P=C("user",()=>{async function c(){return await l("/user/stats")}async function d(t){return await l(`/user/rapport?${t.toString()}`)}async function f(t){return await l(`/user/all?${t.toString()}`)}async function p(t){return await l(`/user/all/filter?${t.toString()}`)}async function g(t){return await l(`/user/${t.id}/${t.uid}`)}async function u(t){return await l("/user/create",{method:"POST",body:t})}async function _(t){return await l("/user/update",{method:"put",body:t})}return{analityc:c,rapport:d,all:f,create:u,findDetail:g,allByFilter:p,update:_}}),V=C("UserViewModel",()=>{const c=P(),d=S({analityc:[],club:[]}),f=S({data:"",analityc:"",exercice:""}),p=S({data:[],page:[]}),g=x(),u=x(!1);let _={name:"",last_name:"",phone:"",email:"",role:"super_admin",password:""};const t=S({..._}),U=S({..._,id:""});async function $(){var a,r;const e=await c.analityc();f.data=(a=e==null?void 0:e.data)==null?void 0:a.data,f.analityc=(r=e==null?void 0:e.data)==null?void 0:r.analytic}async function E(e){var r,o,n,i,y,w;const a=await c.rapport(e);d.exercice=(o=(r=a==null?void 0:a.data)==null?void 0:r.data)==null?void 0:o.exercice,d.analityc=(i=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:i.analityc,d.club=(w=(y=a==null?void 0:a.data)==null?void 0:y.data)==null?void 0:w.club}async function F(e=""){var r,o,n,i,y,w,b,h;const a=await c.allByFilter(e);return(o=(r=a.data)==null?void 0:r.data)==null||o.links.shift(),(i=(n=a.data)==null?void 0:n.data)==null||i.links.pop(),p.page=(w=(y=a.data)==null?void 0:y.data)==null?void 0:w.links,p.data=[...(h=(b=a.data)==null?void 0:b.data)==null?void 0:h.data.map((s,T)=>({id:s==null?void 0:s.id,name:s==null?void 0:s.name,last_name:s==null?void 0:s.last_name,phone:s==null?void 0:s.phone,email:s==null?void 0:s.email,role:s==null?void 0:s.role}))],a}async function k(e=""){var r,o;const a=await c.all(e);return[...(o=(r=a.data)==null?void 0:r.data)==null?void 0:o.map((n,i)=>({id:n==null?void 0:n.id,uid:n==null?void 0:n.exercice_uid,annee:n==null?void 0:n.annee,begin_date:n==null?void 0:n.begin_date,end_date:n==null?void 0:n.end_date,status:n==null?void 0:n.status}))],a}async function B(e){var r;const a=await c.findDetail(e);return g.value=(r=a==null?void 0:a.data)==null?void 0:r.data,a}async function D(){var r;u.value=!0;let e={...t};const a=await c.create(e);a!=null&&a.error&&alert((r=a==null?void 0:a.error)==null?void 0:r.message),a!=null&&a.data&&v("Opération éffectuée",{autoClose:1e3,type:v.TYPE.SUCCESS}),u.value=!1}async function O(){var r;u.value=!0;let e={...U};console.log("updateUser",U);const a=await c.update(e);a!=null&&a.error&&alert((r=a==null?void 0:a.error)==null?void 0:r.message),a!=null&&a.data&&v("Opération éffectuée",{autoClose:1e3,type:v.TYPE.SUCCESS}),u.value=!1}return{analityc:$,stats:f,rapport:E,rapports:d,newUser:t,updateUser:U,isLoading:u,all:k,users:p,allByFilter:F,create:D,findDetail:B,user:g,update:O}});export{V as u};
