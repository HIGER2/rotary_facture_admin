import{_ as U}from"./ByfPELPb.js";import{f as A,r as h,c as m,o as p,a as e,b as r,w as g,m as T,l as t,j as S,y as q,z,k as C,i as I,t as u,e as P,d as D,F as E,q as G,p as F,v as R,E as H}from"./BFPTrp0h.js";import{_ as J}from"./CXJBAqDr.js";import{_ as K}from"./CJrabbkQ.js";import{_ as O}from"./BQ7FBMdy.js";import{_ as Q}from"./B7UqBbOK.js";import{u as L}from"./1cxuoOn_.js";import{_ as W}from"./CFXGKQw5.js";import{U as X}from"./DIIv37rX.js";import"./t10vKh5n.js";import"./BQnPyFD4.js";const Y={class:"grid mt-4 w-full max-w-lg gap-4"},Z=["onClick"],ee={key:0,class:"mt-2"},te=A({__name:"ImportComponent",props:{isActive:{type:Boolean},setActive:{type:Function},callback:{type:Function}},setup(w){const o=w,l=L();let _=h(!1);const b=()=>{l.file=null,o.setActive(!1)},x=async()=>{_.value=!0,await l.createFactureFromFile(),o.callback&&await o.callback(),_.value=!1,b()};return(c,n)=>{const s=U,a=O,f=Q;return p(),m("div",null,[e("div",null,[r(f,{isActive:c.isActive,onClose:b},{default:g(()=>[e("div",Y,[e("form",{action:"",onSubmit:T(x,["prevent"])},[r(a,{file:t(l).file,"onUpdate:file":n[0]||(n[0]=v=>t(l).file=v),accept:".xls,.xlsx,csv"},{default:g(({onOpen:v})=>[e("div",{onClick:v,class:"w-full cursor-pointer mb-4 flex items-center flex-col justify-center h-40 border border-dashed rounded-md border-gray-400"},[n[2]||(n[2]=e("span",{class:"text-[14px]"},"Cliquez ici pour importer votre fichier",-1)),e("span",{class:q(["w-20 h-20 leading-20 bg-gray-100 rounded-full block text-center mt-2",{"text-green-800 bg-green-100":t(l).file}])},n[1]||(n[1]=[e("i",{class:"uil uil-file-alt text-4xl mt-4"},null,-1)]),2),t(l).file?(p(),m("span",ee,"Ficher importÃ©")):S("",!0)],8,Z),r(s,{isLoading:t(_),name:"action",type:"submit",value:"send",label:"Soumettre",disabled:!t(l).file},null,8,["isLoading","disabled"])]),_:1},8,["file"])],32)])]),_:1},8,["isActive"])])])}}}),se={class:"w-full"},oe={class:"w-full p-2"},le={class:"w-full"},ae={class:"w-full flex items-center justify-between mb-10"},ie={class:"text-sm font-semibold uppercase text-neutral-500"},ne={key:0,class:"w-auto flex gap-2 items-center"},re={class:"w-full grid grid-cols-1 md:grid-cols-4 gap-4 p-2 mb-5"},ce={class:"text-xs text-gray-500 font-medium"},ue={class:"text-lg font-extrabold"},de={class:"w-full flex items-center justify-between mb-3"},fe={class:"w-auto"},me=["placeholder"],pe={class:"w-auto gap-2 flex items-center justify-between"},_e={value:""},be={value:"brouillon"},ve={value:"courante"},xe={value:"arriere"},ge={class:"w-full"},Ve=A({__name:"index",setup(w){const o=L(),l=h(!1),{formatNumber:_}=X(),b=h(!1),x=s=>{b.value=s},c=z({search:"",status:""}),n=async(s={})=>{var f;((f=o==null?void 0:o.factures)==null?void 0:f.length)==0&&(l.value=!0);const a=new URLSearchParams({search:c.search||"",status:s.status||"",statusPayment:""});await o.all(a),l.value=!1};return C(c,s=>{let a=setTimeout(async()=>{l.value=!0,o.factures=[],n(s),clearTimeout(a)},400)},{deep:!0}),I(()=>{n()}),(s,a)=>{const f=U,v=P,N=J,V=K,j=te,B=W;return p(),m("div",null,[r(B,null,{default:g(({userConnected:d})=>{var y,$,k;return[e("div",se,[e("div",oe,[e("div",le,[e("div",ae,[e("h5",ie,u(s.$t("facture.title")),1),(d==null?void 0:d.role)!=="club"?(p(),m("div",ne,[r(f,{onClick:a[0]||(a[0]=i=>x(!0)),class:"!bg-gray-100 !text-black border border-slate-200",type:"button",label:"Importer"}),r(v,{class:"inline-flex items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none text-xs disabled:opacity-50 bg-primary text-slate-50 shadow px-4 py-3 self-start",to:"/account/factures/create"},{default:g(()=>[D(u(s.$t("facture.button")),1)]),_:1})])):S("",!0)])]),e("div",re,[(p(!0),m(E,null,G((y=t(o))==null?void 0:y.analityc,(i,M)=>(p(),m("div",{key:M,class:"box"},[e("span",ce,u(s.$t(i==null?void 0:i.label)),1),e("h2",ue,u(t(_)(i==null?void 0:i.value)),1)]))),128))]),e("div",de,[e("div",fe,[F(e("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>t(c).search=i),class:"flex rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 h-8 w-[150px] lg:w-[250px]",placeholder:s.$t("placeholder_search"),autocomplete:"off"},null,8,me),[[R,t(c).search]])]),e("div",pe,[F(e("select",{"onUpdate:modelValue":a[2]||(a[2]=i=>t(c).status=i),class:"flex rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 h-8 w-[150px] lg:w-[120px]"},[e("option",_e,u(s.$t("facture.filter.x1")),1),e("option",be,u(s.$t("facture.filter.x3")),1),e("option",ve,u(s.$t("facture.filter.x2")),1),e("option",xe,u(s.$t("facture.filter.x4")),1)],512),[[H,t(c).status]]),r(N,{data:($=t(o))==null?void 0:$.factures,colunm:t(o).columns[d==null?void 0:d.role],lang:""},null,8,["data","colunm"])])]),e("div",ge,[r(V,{columns:t(o).columns,loading:t(l),user:d,data:(k=t(o))==null?void 0:k.factures},null,8,["columns","loading","user","data"])])])]),r(j,{callback:n,isActive:t(b),setActive:x},null,8,["isActive"])]}),_:1})])}}});export{Ve as default};
