import{_ as G,a as J}from"./Q6xmKibN.js";import{_ as F}from"./IFtJ1BEw.js";import{_ as H}from"./CGGGtUZG.js";import{_ as O}from"./BchKW30C.js";import{_ as R}from"./DqdAosTr.js";import{_ as S}from"./DRjeCgfK.js";import{g as k,c as f,o as d,b as u,w as _,a as t,q as z,t as b,r as x,F as W,p as o,j as K,H as Q,k as X,C as U,l as I,y as Y,D as Z}from"./l5F4RGht.js";import{u as E}from"./B6Y-pVYT.js";import{_ as ee}from"./CXzMQZ7R.js";import{_ as te}from"./D2R3acs0.js";import{u as ae}from"./C81QlEZD.js";import{_ as ne,a as se}from"./CuAVTgxc.js";import"./B4uPnpJb.js";const oe={class:"grid mt-4 w-full max-w-lg gap-4"},le={class:"space-y-2 mb-4 flex gap-2"},ie={class:"space-y-2 mb-4"},ue=k({__name:"AddPaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},createPayment:{type:Function},isLoading:{type:Boolean},newPayment:{},optionMethode:{},optionStatus:{}},setup(g){return(e,a)=>{const i=O,y=R,p=F,c=S;return d(),f("div",null,[u(c,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",oe,[a[4]||(a[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:a[3]||(a[3]=z((...s)=>e.createPayment&&e.createPayment(...s),["prevent"]))},[t("div",le,[u(i,{required:"",label:"Statut",modelValue:e.newPayment.status,"onUpdate:modelValue":a[0]||(a[0]=s=>e.newPayment.status=s),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),u(i,{required:"",modelValue:e.newPayment.mode_paiement,"onUpdate:modelValue":a[1]||(a[1]=s=>e.newPayment.mode_paiement=s),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",ie,[u(y,{required:"",modelValue:e.newPayment.amount,"onUpdate:modelValue":a[2]||(a[2]=s=>e.newPayment.amount=s),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),u(p,{label:"Créer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),re={class:"grid mt-4 w-full max-w-lg gap-4"},de={class:"flex flex-col space-y-1.5 text-center sm:text-left"},ce={id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"},me={class:"space-y-2 mb-4"},pe=k({__name:"AddPaymentClubComponent",props:{isActive:{type:Boolean},setActive:{type:Function},processPayment:{type:Function},isLoading:{type:Boolean},paymentAmount:{}},setup(g){return(e,a)=>{const i=R,y=F,p=S;return d(),f("div",null,[u(p,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",re,[t("div",de,[t("h2",ce,b(e.$t("facture.detail.payment_form.title_new")),1)]),t("form",{class:"space-y-8",onSubmit:a[1]||(a[1]=z((...c)=>e.processPayment&&e.processPayment(...c),["prevent"]))},[t("div",me,[u(i,{required:"",modelValue:e.paymentAmount.amount,"onUpdate:modelValue":a[0]||(a[0]=c=>e.paymentAmount.amount=c),min:"100",type:"number",label:e.$t("facture.detail.payment_form.label1"),placeholder:e.$t("facture.detail.payment_form.label1"),name:"title"},null,8,["modelValue","label","placeholder"])]),u(y,{label:e.$t("facture.detail.payment_form.button_new"),isLoading:e.isLoading},null,8,["label","isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),ye={class:"grid mt-4 w-full max-w-lg gap-4"},fe={class:"space-y-2 mb-4 flex gap-2"},be={class:"space-y-2 mb-4"},_e=k({__name:"UpdatePaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},updatePayment:{type:Function},isLoading:{type:Boolean},update:{},optionMethode:{},optionStatus:{}},setup(g){return(e,a)=>{const i=O,y=R,p=F,c=S;return d(),f("div",null,[u(c,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",ye,[a[4]||(a[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:a[3]||(a[3]=z((...s)=>e.updatePayment&&e.updatePayment(...s),["prevent"]))},[t("div",fe,[u(i,{required:"",label:"Statut",modelValue:e.update.status,"onUpdate:modelValue":a[0]||(a[0]=s=>e.update.status=s),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),u(i,{required:"",modelValue:e.update.mode_paiement,"onUpdate:modelValue":a[1]||(a[1]=s=>e.update.mode_paiement=s),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",be,[u(y,{required:"",modelValue:e.update.amount,"onUpdate:modelValue":a[2]||(a[2]=s=>e.update.amount=s),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),u(p,{label:"Enregistrer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),ve={class:"mt-4"},ge={class:"px-4 sm:px-0 flex items-center justify-between"},he={class:"text-base font-semibold leading-7 text-gray-900"},we={class:"mt-6"},Pe=["onClick"],ke=k({__name:"PaymentComponent",props:{payments:{},facture:{},user:{},handleListe:{type:Function}},setup(g){const e=E(),a=g,i=x(!1),y=x(!1),p=x(!1),c=n=>{y.value=n},s=n=>{i.value=n},$=n=>{p.value=n},h=n=>{e.updatePayment.status=n==null?void 0:n.status,e.updatePayment.mode_paiement=n==null?void 0:n.mode_paiement,e.updatePayment.id=n==null?void 0:n.id,e.updatePayment.amount=n==null?void 0:n.amount,c(!0)},V=async n=>{await e.create(n),a.handleListe()},M=async n=>{await Promise.all([e.processePayment(n),a.handleListe()])},B=async()=>{await Promise.all([e.update(),a.handleListe()])},w=[{label:"facture.detail.payment_colunm.td1",key:"reference"},{label:"facture.detail.payment_colunm.td2",key:"amount"},{label:"facture.detail.payment_colunm.td3",key:"status"},{label:"facture.detail.payment_colunm.td4",key:"mode_paiement"},{label:"facture.detail.payment_colunm.td5",key:"date"}],j={admin:w,super_admin:w,club:w},l=[{label:"en attente",status:"en attente"},{label:"payé",status:"payée"},{label:"échec",status:"échec"},{label:"annulé",status:"annulé"}],m=[{label:"espèces",status:"espèces"},{label:"chèque",status:"chèque"},{label:"mobile money",status:"mobile money"},{label:"virement",status:"virement"},{label:"carte",status:"carte"}];return(n,v)=>{var A,C;const T=H,D=G,N=ue,P=pe,L=_e;return d(),f("section",ve,[t("div",ge,[t("h3",he,b(n.$t("facture.detail.title_payment")),1),((A=n.user)==null?void 0:A.role)=="club"?(d(),f(W,{key:0},[],64)):(d(),f("button",{key:1,type:"button",onClick:v[0]||(v[0]=r=>$(!0)),class:"cursor-pointer items-center bg-primary justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none text-xs disabled:opacity-50 bg-pri text-slate-50 shadow px-4 py-3 self-start"},b(n.$t("facture.detail.btn_payment")),1))]),t("div",we,[u(D,{columns:j[(C=n.user)==null?void 0:C.role],data:n.payments},{status:_(({item:r})=>[u(T,{status:r==null?void 0:r.status},null,8,["status"])]),action:_(({item:r})=>[t("button",{type:"button",onClick:q=>h(r),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},v[1]||(v[1]=[t("i",{class:"uil uil-pen"},null,-1)]),8,Pe)]),_:1},8,["columns","data"])]),u(N,{"is-active":o(i),"set-active":s,"option-status":l,newPayment:o(e).newPayment,"option-methode":m,createPayment:()=>V(n.facture),"is-loading":o(e).isLoading},null,8,["is-active","newPayment","createPayment","is-loading"]),u(P,{"is-active":o(p),"set-active":$,paymentAmount:o(e).paymentAmount,processPayment:()=>M(n.facture),"is-loading":o(e).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"]),u(L,{"is-active":o(y),"set-active":c,"option-status":l,update:o(e).updatePayment,"option-methode":m,updatePayment:B,"is-loading":o(e).isLoading},null,8,["is-active","update","is-loading"])])}}}),xe=k({__name:"CheckPaymentComponent",props:{isActive:{type:Boolean}},setup(g){return(e,a)=>{const i=S;return d(),f("div",null,[u(i,{isActive:e.isActive},{default:_(()=>a[0]||(a[0]=[t("div",{class:"grid mt-4 w-full max-w-lg gap-4"},[t("div",{class:"min-w-[370px] w-auto"},[t("a",{href:"#",class:"flex items-center justify-center"},[t("img",{alt:"logo",fetchpriority:"high",width:"120",height:"28.422",class:"mb-5",src:ee,style:{color:"transparent"}})]),t("div",{class:"rounded-xl w-full"},[t("div",{class:"flex flex-col space-y-1.5 p-6 px-2 sm:px-6"},[t("h3",{class:"font-semibold text-center tracking-tight text-xl"}," Vérification du paiement "),t("div",{class:"flex items-center justify-center"},[t("div",{class:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})])])])])],-1)])),_:1},8,["isActive"])])}}}),$e={class:"mt-4"},Ae={class:"mt-6"},Ce=["onClick"],qe=k({__name:"RubriqueComponent",props:{rubriques:{},facture:{},user:{}},setup(g){E();const e={admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],super_admin:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}],club:[{label:"libélé",key:"libele"},{label:"quantité",key:"quantity"},{label:"montant",key:"amount"}]};return(a,i)=>{var c;const y=H,p=G;return d(),f("section",$e,[i[1]||(i[1]=t("div",{class:"px-4 sm:px-0 flex items-center justify-between"},[t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Rubriques")],-1)),t("div",Ae,[u(p,{columns:e[(c=a.user)==null?void 0:c.role],data:a.rubriques},{status:_(({item:s})=>[u(y,{status:s==null?void 0:s.status},null,8,["status"])]),action:_(({item:s})=>[t("button",{type:"button",onClick:$=>a.setUpdate(s),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},i[0]||(i[0]=[t("i",{class:"uil uil-pen"},null,-1)]),8,Ce)]),_:1},8,["columns","data"])])])}}}),Ue={key:1,class:"w-full p-2"},Ve={class:"w-full"},Le={class:"px-4 sm:px-0"},Fe={class:"text-base font-semibold leading-7 text-gray-900"},Se={class:"flex items-center justify-between"},Me={class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},Be={class:"mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},je={class:"divide-y divide-gray-100"},Te={class:"text-sm font-medium leading-6 text-gray-900"},De={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Ne={key:1},Re={class:"inline-flex my-5 cursor-pointer h-10 items-center justify-center rounded-lg bg-slate-100 p-2 text-slate-500",tabindex:"0","data-orientation":"horizontal",style:{outline:"none"}},ze=["data-state"],Ee=["data-state"],at=k({__name:"[slug]",setup(g){const e=ae(),a=E(),i=K(),y=Q(),p=x(!1),c=x(!1),s=async()=>{var l;await e.findWithPaiement((l=i==null?void 0:i.params)==null?void 0:l.slug),c.value=!1},$=async l=>{await e.sendFacture(l),await s()},h=x(1),V=l=>{h.value=l},M=async l=>{p.value=!0,await a.checkPayment({TransactionToken:l}),await s(),y.replace({query:{}}),p.value=!1},B=[{label:"facture.detail.label1",value:"reference"},{label:"facture.detail.label2",value:"total_rubrique"},{label:"facture.detail.label3",value:"total_quantity"},{label:"facture.detail.label4",value:"amount"},{label:"facture.detail.label5",value:"amount_pay"},{label:"facture.detail.label6",value:"remaining_amount"},{label:"facture.detail.label7",value:"type",isComponent:ne},{label:"facture.detail.label8",value:"status",isComponent:se},{label:"facture.detail.label9",value:"objet"},{label:"facture.detail.label10",value:"club.name"},{label:"facture.detail.label11",value:"date_emission"},{label:"facture.detail.label12",value:"date_echeance"}];function w(l,m){return m.split(".").reduce((n,v)=>n==null?void 0:n[v],l)}function j(l){return l?new Date(l).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A"}return X(()=>{var l,m;s(),Object.keys(i.query).length>0&&((l=i.query)!=null&&l.TransactionToken)&&M((m=i.query)==null?void 0:m.TransactionToken)}),(l,m)=>{const n=J,v=F,T=ke,D=xe,N=te;return d(),f("div",null,[u(N,null,{default:_(({userConnected:P})=>{var L,A,C;return[o(c)?(d(),U(n,{key:0})):(d(),f("div",Ue,[t("section",Ve,[t("div",Le,[t("h3",Fe,b(l.$t("facture.detail.title")),1),t("div",Se,[t("p",Me,b(l.$t("facture.detail.desc")),1),((L=o(e).facture)==null?void 0:L.status)==="brouillon"&&(P==null?void 0:P.role)!=="club"?(d(),U(v,{key:0,onClick:m[0]||(m[0]=r=>{var q;return $((q=o(e).facture)==null?void 0:q.reference)}),type:"button",class:"max-w-max",label:"Envoyer la facture",isLoading:o(e).isLoading},null,8,["isLoading"])):I("",!0)])]),t("div",Be,[t("div",je,[(d(),f(W,null,Y(B,(r,q)=>t("div",{key:q,class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},[t("div",Te,b(l.$t(r.label)),1),t("div",De,[r.isComponent?(d(),U(Z(r.isComponent),{key:0,status:w(o(e).facture,r.value)||"N/A"},null,8,["status"])):(d(),f("span",Ne,b(r.value==="date_emission"||r.value==="date_echeance"?j(w(o(e).facture,r.value)):w(o(e).facture,r.value)||"N/A"),1))])])),64))])])]),t("div",Re,[t("button",{onClick:m[1]||(m[1]=r=>V(1)),type:"button","data-state":o(h)==1&&"active",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:focus-visible:ring-slate-300",tabindex:"-1","data-orientation":"horizontal","data-radix-collection-item":""},b(l.$t("facture.detail.tab.tab1")),9,ze),t("button",{onClick:m[2]||(m[2]=r=>V(2)),"data-state":o(h)==2&&"active",type:"button",class:"inline-flex cursor-pointer items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow dark:focus-visible:ring-slate-300",tabindex:"0","data-orientation":"horizontal","data-radix-collection-item":""},b(l.$t("facture.detail.tab.tab2")),9,Ee)]),o(h)==1?(d(),U(T,{key:0,user:P,payments:(A=o(e).facture)==null?void 0:A.payments,facture:o(e).facture,handleListe:s},null,8,["user","payments","facture"])):o(h)==2?(d(),U(o(qe),{key:1,user:P,rubriques:(C=o(e).facture)==null?void 0:C.rubriques,facture:o(e).facture},null,8,["user","rubriques","facture"])):I("",!0),u(D,{isActive:o(p)},null,8,["isActive"])]))]}),_:1})])}}});export{at as default};
