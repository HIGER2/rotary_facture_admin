import{_ as W,a as z}from"./QZSqXYiQ.js";import{_ as H}from"./B4ayNjXu.js";import{_ as J}from"./8Dfv3EoP.js";import{_ as G}from"./FnZdAEgK.js";import{_ as T}from"./Du9N_lVr.js";import{_ as N}from"./BQ-yDs5T.js";import{_ as L}from"./D-Iyb2w5.js";import{g as x,c as v,o as g,b as i,w as _,a as t,q as D,r as w,p as o,j as K,k as Q,C as X,t as f}from"./DY93oi3b.js";import{u as O}from"./Clv3Egwy.js";import{_ as Y}from"./C_ZFI-4g.js";import{_ as Z}from"./BVGChidV.js";import{u as tt}from"./cI3ZN0Ba.js";import"./C_gOdtv4.js";const et={class:"grid mt-4 w-full max-w-lg gap-4"},st={class:"space-y-2 mb-4 flex gap-2"},nt={class:"space-y-2 mb-4"},at=x({__name:"AddPaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},createPayment:{type:Function},isLoading:{type:Boolean},newPayment:{},optionMethode:{},optionStatus:{}},setup(b){return(e,s)=>{const m=G,r=T,u=N,d=L;return g(),v("div",null,[i(d,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",et,[s[4]||(s[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:s[3]||(s[3]=D((...l)=>e.createPayment&&e.createPayment(...l),["prevent"]))},[t("div",st,[i(m,{required:"",label:"Statut",modelValue:e.newPayment.status,"onUpdate:modelValue":s[0]||(s[0]=l=>e.newPayment.status=l),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),i(m,{required:"",modelValue:e.newPayment.mode_paiement,"onUpdate:modelValue":s[1]||(s[1]=l=>e.newPayment.mode_paiement=l),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",nt,[i(r,{required:"",modelValue:e.newPayment.amount,"onUpdate:modelValue":s[2]||(s[2]=l=>e.newPayment.amount=l),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),i(u,{label:"Créer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),ot={class:"grid mt-4 w-full max-w-lg gap-4"},it={class:"space-y-2 mb-4"},lt=x({__name:"AddPaymentClubComponent",props:{isActive:{type:Boolean},setActive:{type:Function},processPayment:{type:Function},isLoading:{type:Boolean},paymentAmount:{}},setup(b){return(e,s)=>{const m=T,r=N,u=L;return g(),v("div",null,[i(u,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",ot,[s[2]||(s[2]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Effectué un paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:s[1]||(s[1]=D((...d)=>e.processPayment&&e.processPayment(...d),["prevent"]))},[t("div",it,[i(m,{required:"",modelValue:e.paymentAmount.amount,"onUpdate:modelValue":s[0]||(s[0]=d=>e.paymentAmount.amount=d),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),i(r,{label:"payé maintenant",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),mt={class:"grid mt-4 w-full max-w-lg gap-4"},dt={class:"space-y-2 mb-4 flex gap-2"},rt={class:"space-y-2 mb-4"},ut=x({__name:"UpdatePaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},updatePayment:{type:Function},isLoading:{type:Boolean},update:{},optionMethode:{},optionStatus:{}},setup(b){return(e,s)=>{const m=G,r=T,u=N,d=L;return g(),v("div",null,[i(d,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:_(()=>[t("div",mt,[s[4]||(s[4]=t("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[t("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier paiement ")],-1)),t("form",{class:"space-y-8",onSubmit:s[3]||(s[3]=D((...l)=>e.updatePayment&&e.updatePayment(...l),["prevent"]))},[t("div",dt,[i(m,{required:"",label:"Statut",modelValue:e.update.status,"onUpdate:modelValue":s[0]||(s[0]=l=>e.update.status=l),options:e.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),i(m,{required:"",modelValue:e.update.mode_paiement,"onUpdate:modelValue":s[1]||(s[1]=l=>e.update.mode_paiement=l),options:e.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),t("div",rt,[i(r,{required:"",modelValue:e.update.amount,"onUpdate:modelValue":s[2]||(s[2]=l=>e.update.amount=l),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),i(u,{label:"Enregistrer",isLoading:e.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),pt={class:"mt-4"},ct={class:"px-4 sm:px-0 flex items-center justify-between"},yt={class:"mt-6"},gt=["onClick"],ft=x({__name:"PaymentComponent",props:{payments:{},facture:{},user:{},handleListe:{type:Function}},setup(b){const e=O(),s=b,m=w(!1),r=w(!1),u=w(!1),d=n=>{r.value=n},l=n=>{m.value=n},p=n=>{u.value=n},a=n=>{e.updatePayment.status=n==null?void 0:n.status,e.updatePayment.mode_paiement=n==null?void 0:n.mode_paiement,e.updatePayment.id=n==null?void 0:n.id,e.updatePayment.amount=n==null?void 0:n.amount,d(!0)},M=async n=>{await e.create(n),s.handleListe()},S=async n=>{await Promise.all([e.processePayment(n),s.handleListe()])},q=async()=>{await Promise.all([e.update(),s.handleListe()])},B={admin:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"},{label:"action",key:"action"}],club:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"}]},A=[{label:"en attente",status:"en attente"},{label:"payé",status:"payée"},{label:"échec",status:"échec"},{label:"annulé",status:"annulé"}],k=[{label:"espèces",status:"espèces"},{label:"chèque",status:"chèque"},{label:"mobile money",status:"mobile money"},{label:"virement",status:"virement"},{label:"carte",status:"carte"}];return(n,c)=>{var P,h;const C=J,U=W,V=at,$=lt,F=ut;return g(),v("section",pt,[t("div",ct,[c[2]||(c[2]=t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Paiements",-1)),((P=n.user)==null?void 0:P.role)=="admin"?(g(),v("button",{key:0,type:"button",onClick:c[0]||(c[0]=y=>l(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none text-xs disabled:opacity-50 bg-[#1F2923] text-slate-50 shadow hover:bg-[#2f3a34] px-4 py-3 self-start"}," Nouveau paiement ")):(g(),v("button",{key:1,type:"button",onClick:c[1]||(c[1]=y=>p(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none text-xs disabled:opacity-50 bg-[#1F2923] text-slate-50 shadow hover:bg-[#2f3a34] px-4 py-3 self-start"}," Effectué un paiement "))]),t("div",yt,[i(U,{columns:B[(h=n.user)==null?void 0:h.role],data:n.payments},{status:_(({item:y})=>[i(C,{status:y==null?void 0:y.status},null,8,["status"])]),action:_(({item:y})=>[t("button",{type:"button",onClick:j=>a(y),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},c[3]||(c[3]=[t("i",{class:"uil uil-pen"},null,-1)]),8,gt)]),_:1},8,["columns","data"])]),i(V,{"is-active":o(m),"set-active":l,"option-status":A,newPayment:o(e).newPayment,"option-methode":k,createPayment:()=>M(n.facture),"is-loading":o(e).isLoading},null,8,["is-active","newPayment","createPayment","is-loading"]),i($,{"is-active":o(u),"set-active":p,paymentAmount:o(e).paymentAmount,processPayment:()=>S(n.facture),"is-loading":o(e).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"]),i(F,{"is-active":o(r),"set-active":d,"option-status":A,update:o(e).updatePayment,"option-methode":k,updatePayment:q,"is-loading":o(e).isLoading},null,8,["is-active","update","is-loading"])])}}}),vt=x({__name:"CheckPaymentComponent",props:{isActive:{type:Boolean}},setup(b){return(e,s)=>{const m=L;return g(),v("div",null,[i(m,{isActive:e.isActive},{default:_(()=>s[0]||(s[0]=[t("div",{class:"grid mt-4 w-full max-w-lg gap-4"},[t("div",{class:"min-w-[370px] w-auto"},[t("a",{href:"#",class:"flex items-center justify-center"},[t("img",{alt:"logo",fetchpriority:"high",width:"120",height:"28.422",class:"mb-5",src:Y,style:{color:"transparent"}})]),t("div",{class:"rounded-xl w-full"},[t("div",{class:"flex flex-col space-y-1.5 p-6 px-2 sm:px-6"},[t("h3",{class:"font-semibold text-center tracking-tight text-xl"}," Vérification du paiement "),t("div",{class:"flex items-center justify-center"},[t("div",{class:"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})])])])])],-1)])),_:1},8,["isActive"])])}}}),_t={key:1,class:"w-full p-2"},bt={class:"w-full"},xt={class:"mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},Pt={class:"divide-y divide-gray-100"},ht={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},wt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},At={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},kt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Ct={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Ut={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Vt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},$t={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Ft={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Lt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Mt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},St={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},qt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Bt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},jt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Tt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Nt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Dt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Et={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},It={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ee=x({__name:"[slug]",setup(b){const e=tt(),s=O(),m=K(),r=w(!1),u=w(!1),d=async()=>{var p;u.value=!0,await e.findWithPaiement((p=m==null?void 0:m.params)==null?void 0:p.slug),u.value=!1},l=async p=>{r.value=!0,await s.checkPayment({TransactionToken:p}),r.value=!1};return Q(()=>{var p,a;d(),Object.keys(m.query).length>0&&((p=m.query)!=null&&p.TransactionToken)&&l((a=m.query)==null?void 0:a.TransactionToken)}),(p,a)=>{const M=z,S=H,q=ft,B=vt,A=Z;return g(),v("div",null,[i(A,null,{default:_(({userConnected:k})=>{var n,c,C,U,V,$,F,P,h,y,j,E,I,R;return[o(u)?(g(),X(M,{key:0})):(g(),v("div",_t,[t("section",bt,[a[10]||(a[10]=t("div",{class:"px-4 sm:px-0"},[t("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Général"),t("p",{class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},"Détail de la facture")],-1)),t("div",xt,[t("dl",Pt,[t("div",ht,[a[0]||(a[0]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," N°Facture ",-1)),t("div",wt,f((n=o(e).facture)==null?void 0:n.reference),1)]),t("div",At,[a[1]||(a[1]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Montant ",-1)),t("div",kt,f((c=o(e).facture)==null?void 0:c.amount),1)]),t("div",Ct,[a[2]||(a[2]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Reste à payer ",-1)),t("div",Ut,f((C=o(e).facture)==null?void 0:C.remaining_amount),1)]),t("div",Vt,[a[3]||(a[3]=t("dt",{class:"text-sm font-medium leading-6 text-gray-900"}," Statut ",-1)),t("div",$t,[i(S,{status:(U=o(e).facture)==null?void 0:U.status},null,8,["status"])])]),t("div",Ft,[a[4]||(a[4]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Description ",-1)),t("div",Lt,f((V=o(e).facture)==null?void 0:V.objet),1)]),t("div",Mt,[a[5]||(a[5]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Club ",-1)),t("div",St,f((F=($=o(e).facture)==null?void 0:$.club)==null?void 0:F.name),1)]),t("div",qt,[a[6]||(a[6]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Libélé rubrique ",-1)),t("div",Bt,f((h=(P=o(e).facture)==null?void 0:P.rubrique)==null?void 0:h.libele),1)]),t("div",jt,[a[7]||(a[7]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Prix rubrique ",-1)),t("div",Tt,f((j=(y=o(e).facture)==null?void 0:y.rubrique)==null?void 0:j.price),1)]),t("div",Nt,[a[8]||(a[8]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Date émission ",-1)),t("div",Dt,f((E=o(e).facture)==null?void 0:E.date_emission),1)]),t("div",Et,[a[9]||(a[9]=t("div",{class:"text-sm font-medium leading-6 text-gray-900"}," date échéance ",-1)),t("div",It,f((I=o(e).facture)==null?void 0:I.date_echeance),1)])])])]),i(q,{user:k,payments:(R=o(e).facture)==null?void 0:R.payments,facture:o(e).facture,handleListe:d},null,8,["user","payments","facture"]),i(B,{isActive:o(r)},null,8,["isActive"])]))]}),_:1})])}}});export{ee as default};
