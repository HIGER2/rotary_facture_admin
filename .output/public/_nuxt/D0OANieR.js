import{B as $,z as y,r as C,I as g}from"./l5F4RGht.js";import{u as l}from"./B4uPnpJb.js";const P=$("user",()=>{async function o(){return await l("/user/stats")}async function i(e){return await l(`/user/rapport?${e.toString()}`)}async function f(e){return await l(`/user/all?${e.toString()}`)}async function p(e){return await l(`/user/all/filter?${e.toString()}`)}async function w(e){return await l(`/user/${e.id}/${e.uid}`)}async function u(e){return await l("/user/create",{method:"POST",body:e})}async function S(e){return await l("/user/update",{method:"put",body:e})}return{analityc:o,rapport:i,all:f,create:u,findDetail:w,allByFilter:p,update:S}}),Y=$("UserViewModel",()=>{const o=P(),i=y({analityc:[],club:[]}),f=y({data:"",analityc:""}),p=y({data:[],page:[]}),w=C(),u=C(!1);let S={name:"",last_name:"",phone:"",email:"",role:"super_admin",password:""};const e=y({...S}),_=y({...S,id:""});async function x(){var a,r;const s=await o.analityc();f.data=(a=s==null?void 0:s.data)==null?void 0:a.data,f.analityc=(r=s==null?void 0:s.data)==null?void 0:r.analytic}async function B(s){var r,c,n,d;const a=await o.rapport(s);i.analityc=(c=(r=a==null?void 0:a.data)==null?void 0:r.data)==null?void 0:c.analityc,i.club=(d=(n=a==null?void 0:a.data)==null?void 0:n.data)==null?void 0:d.club}async function E(s=""){var r,c,n,d,v,U,b,h;const a=await o.allByFilter(s);return(c=(r=a.data)==null?void 0:r.data)==null||c.links.shift(),(d=(n=a.data)==null?void 0:n.data)==null||d.links.pop(),p.page=(U=(v=a.data)==null?void 0:v.data)==null?void 0:U.links,p.data=[...(h=(b=a.data)==null?void 0:b.data)==null?void 0:h.data.map((t,T)=>({id:t==null?void 0:t.id,name:t==null?void 0:t.name,last_name:t==null?void 0:t.last_name,phone:t==null?void 0:t.phone,email:t==null?void 0:t.email,role:t==null?void 0:t.role}))],a}async function F(s=""){var r,c;const a=await o.all(s);return[...(c=(r=a.data)==null?void 0:r.data)==null?void 0:c.map((n,d)=>({id:n==null?void 0:n.id,uid:n==null?void 0:n.exercice_uid,annee:n==null?void 0:n.annee,begin_date:n==null?void 0:n.begin_date,end_date:n==null?void 0:n.end_date,status:n==null?void 0:n.status}))],a}async function k(s){var r;const a=await o.findDetail(s);return w.value=(r=a==null?void 0:a.data)==null?void 0:r.data,a}async function D(){var r;u.value=!0;let s={...e};const a=await o.create(s);a!=null&&a.error&&alert((r=a==null?void 0:a.error)==null?void 0:r.message),a!=null&&a.data&&g("Opération éffectuée",{autoClose:1e3,type:g.TYPE.SUCCESS}),u.value=!1}async function O(){var r;u.value=!0;let s={..._};console.log("updateUser",_);const a=await o.update(s);a!=null&&a.error&&alert((r=a==null?void 0:a.error)==null?void 0:r.message),a!=null&&a.data&&g("Opération éffectuée",{autoClose:1e3,type:g.TYPE.SUCCESS}),u.value=!1}return{analityc:x,stats:f,rapport:B,rapports:i,newUser:e,updateUser:_,isLoading:u,all:F,users:p,allByFilter:E,create:D,findDetail:k,user:w,update:O}});export{Y as u};
