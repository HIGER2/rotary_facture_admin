import{m as w,x as d,r as P,E as o}from"./CraAwoDk.js";import{u as s}from"./CMICIuFv.js";const h=w("payment",()=>{async function u(e){return await s(`/payment/all?${e.toString()}`)}async function c(e){return await s("/payment/create",{method:"POST",body:e})}async function t(e){return await s("/payment/update",{method:"put",body:e})}async function f(e){return await s(`/payment/find/${e}`)}return{all:u,create:c,findWithPaiement:f,update:t}}),x=w("PaymentViewModel",()=>{const u=h(),c=d([]);d({});const t=d(!1),e=P({...{facture_id:"",facture_uid:"",amount:"",status:"",mode_paiement:""}}),l=P({amount:null,mode_paiement:"",status:"",id:""});async function S(n){var p;const r=await u.all(n);c.value=[...(p=r.data)==null?void 0:p.data.map((a,E)=>{var y,i;return{reference:a==null?void 0:a.reference,club:((y=a==null?void 0:a.club)==null?void 0:y.name)||"N/A",fac:((i=a==null?void 0:a.facture)==null?void 0:i.reference)||"N/A",amount:a==null?void 0:a.amount,status:a==null?void 0:a.status,mode_paiement:a==null?void 0:a.mode_paiement,date:a==null?void 0:a.date}})]}async function _(n){t.value=!0;let r={...e,facture_id:n.id,facture_uid:n.facture_uid};await u.create(r),o("Opération éffectuée",{autoClose:1e3,type:o.TYPE.SUCCESS}),t.value=!1}async function v(){t.value=!0;let n={...l};await u.update(n),o("Opération éffectuée",{autoClose:1e3,type:o.TYPE.SUCCESS}),t.value=!1}async function C(n){await u.findWithPaiement(n)}return{all:S,create:_,findWithPaiement:C,newPayment:e,payments:c,isLoading:t,updatePayment:l,update:v}});export{x as u};
