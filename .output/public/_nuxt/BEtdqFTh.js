import{z as _,r as y,A as d,G as p}from"./DZchtIta.js";import{u as s}from"./qvOv5KBm.js";const A=_("payment",()=>{async function c(t){return await s(`/payment/all?${t.toString()}`)}async function f(t){return await s("/payment/create",{method:"POST",body:t})}async function i(t){return await s("/payment/processe",{method:"POST",body:t})}async function u(t){return await s("/payment/update",{method:"put",body:t})}async function m(t){return await s("/payment/verify/token",{method:"post",body:t})}async function l(t){return await s(`/payment/find/${t}`)}return{all:c,create:f,findWithPaiement:l,update:u,processePayment:i,checkPayment:m}}),W=_("PaymentViewModel",()=>{const c=A(),f=y([]);y({});const i=y([]),u=y(!1),l=d({...{facture_id:"",facture_uid:"",amount:"",status:"",mode_paiement:""}}),t=d({amount:""}),P=d({amount:null,mode_paiement:"",status:"",id:""});async function h(r){var e,o;const n=await c.all(r);i.value=(e=n==null?void 0:n.data)==null?void 0:e.analytic,f.value=[...(o=n.data)==null?void 0:o.data.map((a,E)=>{var w,v;return{reference:a==null?void 0:a.reference,club:((w=a==null?void 0:a.club)==null?void 0:w.name)||"N/A",fac:((v=a==null?void 0:a.facture)==null?void 0:v.reference)||"N/A",amount:a==null?void 0:a.amount,status:a==null?void 0:a.status,mode_paiement:a==null?void 0:a.mode_paiement,date:a==null?void 0:a.date}})]}async function S(r){var o;u.value=!0;let n={...l,facture_id:r.id,facture_uid:r.facture_uid};const e=await c.create(n);e!=null&&e.error&&alert((o=e==null?void 0:e.error)==null?void 0:o.message),e!=null&&e.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),u.value=!1}async function C(r){var o;u.value=!0;let n={...t,facture_id:r.id,facture_uid:r.facture_uid};const e=await c.processePayment(n);e!=null&&e.error&&alert((o=e==null?void 0:e.error)==null?void 0:o.message),e!=null&&e.data,u.value=!1}async function b(r){u.value=!0,await c.checkPayment(r),u.value=!1}async function g(){var e;u.value=!0;let r={...P};const n=await c.update(r);n!=null&&n.error&&alert((e=n==null?void 0:n.error)==null?void 0:e.message),n!=null&&n.data&&p("Opération éffectuée",{autoClose:1e3,type:p.TYPE.SUCCESS}),u.value=!1}async function k(r){await c.findWithPaiement(r)}return{all:h,create:S,findWithPaiement:k,newPayment:l,payments:f,isLoading:u,updatePayment:P,update:g,processePayment:C,paymentAmount:t,checkPayment:b,analityc:i}});export{W as u};
