import{B as C,r as g,z as w,G as f}from"./DCWID9o3.js";import{u as l}from"./nDhXOPW6.js";const D=C("exercice",()=>{async function x(r){return await l(`/exercice/all?${r.toString()}`)}async function u(r){return await l(`/exercice/all/filter?${r.toString()}`)}async function i(r){return await l(`/exercice/${r.id}/${r.uid}`)}async function s(r){return await l("/exercice/create",{method:"POST",body:r})}async function o(r){return await l("/exercice/update",{method:"put",body:r})}return{all:x,create:s,findDetail:i,allByFilter:u,update:o}}),M=C("ExerciceViewModel",()=>{const x=g([]),u=w({data:[],page:[]}),i=g(),s=g(!1),o=D();let r={annee:"",begin_date:"",end_date:"",status:"en_cours"};const _=w({...r}),p=w({...r,id:""});async function h(t=""){var c,d,e,y,E,S,b,v;const a=await o.allByFilter(t);return(d=(c=a.data)==null?void 0:c.data)==null||d.links.shift(),(y=(e=a.data)==null?void 0:e.data)==null||y.links.pop(),u.page=(S=(E=a.data)==null?void 0:E.data)==null?void 0:S.links,u.data=[...(v=(b=a.data)==null?void 0:b.data)==null?void 0:v.data.map((n,O)=>({id:n==null?void 0:n.id,uid:n==null?void 0:n.exercice_uid,annee:n==null?void 0:n.annee,begin_date:n==null?void 0:n.begin_date,end_date:n==null?void 0:n.end_date,status:n==null?void 0:n.status}))],a}async function B(t=""){var c,d;const a=await o.all(t);return[...(d=(c=a.data)==null?void 0:c.data)==null?void 0:d.map((e,y)=>({id:e==null?void 0:e.id,uid:e==null?void 0:e.exercice_uid,annee:e==null?void 0:e.annee,begin_date:e==null?void 0:e.begin_date,end_date:e==null?void 0:e.end_date,status:e==null?void 0:e.status}))],a}async function F(t){var c;const a=await o.findDetail(t);return i.value=(c=a==null?void 0:a.data)==null?void 0:c.data,a}async function $(){var c;s.value=!0;let t={..._};const a=await o.create(t);a!=null&&a.error&&alert((c=a==null?void 0:a.error)==null?void 0:c.message),a!=null&&a.data&&f("Opération éffectuée",{autoClose:1e3,type:f.TYPE.SUCCESS}),s.value=!1}async function k(){var c;s.value=!0;let t={...p};console.log("updateExercice",p);const a=await o.update(t);a!=null&&a.error&&alert((c=a==null?void 0:a.error)==null?void 0:c.message),a!=null&&a.data&&f("Opération éffectuée",{autoClose:1e3,type:f.TYPE.SUCCESS}),s.value=!1}return{all:B,exercice:i,exercices:u,newExercice:_,create:$,isLoading:s,findDetail:F,allByFilter:h,updateExercice:p,update:k,optionExercice:x}});export{M as u};
