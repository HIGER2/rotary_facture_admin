import{a as T}from"./BUOYyThZ.js";import{_ as V,a as j}from"./CapxvIEN.js";import{_ as B}from"./Dl7nc6ny.js";import{u as M}from"./C7G-MQ3Z.js";import{u as R}from"./B9WqBwcW.js";import{f as U,h as z,I as E,r as f,i as I,c as u,b as y,w as O,o as n,z as w,l as s,a,t as m,F as S,q as W,A as G}from"./DoEeMXyA.js";import{U as H}from"./DIIv37rX.js";import{_ as J,a as K}from"./B83ko60R.js";import"./D7yrYIje.js";import"./CBygadXr.js";import"./C-nTg9g8.js";import"./Bgi-asYE.js";const Q={key:1,class:"w-full p-2"},X={class:"w-full"},Y={class:"px-4 sm:px-0"},Z={class:"text-base font-semibold leading-7 text-gray-900"},ee={class:"flex items-center justify-between"},te={class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},ae={class:"w-full flex gap-3 items-center"},se={class:"w-full mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},ne={class:"divide-y divide-gray-100"},oe={class:"text-sm font-medium leading-6 text-gray-900"},le={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ie={key:1},re={class:"w-full"},we=U({__name:"[slug]",setup(ce){const o=M(),r=R(),l=z(),x=E(),b=f(!1),p=f(!1),g=f(!1),{formatNumber:A}=H(),h=async()=>{var e;p.value=!0,await o.findWithPaiement((e=l==null?void 0:l.params)==null?void 0:e.slug),p.value=!1},v=e=>{e||r.resetPaymentAmount(),g.value=e};f(1);const P=async e=>{b.value=!0,await r.checkPayment({TransactionToken:e}),await h(),x.replace({query:{}}),b.value=!1},q={left:[{label:"facture.detail.label1",key:"reference"},{label:"facture.detail.label9",key:"objet"},{label:"facture.detail.label2",key:"total_rubrique"},{label:"facture.detail.label3",key:"total_quantity"},{label:"facture.detail.label4",key:"amount"},{label:"facture.detail.label5",key:"amount_pay"},{label:"facture.detail.label6",key:"remaining_amount"},{label:"facture.detail.label12",key:"date_echeance"}],right:[{label:"facture.detail.label7",key:"status",isComponent:J},{label:"facture.detail.label8",key:"status_payment",isComponent:K},{label:"facture.detail.label9",key:"objet"},{label:"facture.detail.label10",key:"club.name"},{label:"facture.detail.label11",key:"date_emission"}]};function d(e,t){return t.split(".").reduce((c,_)=>c==null?void 0:c[_],e)}function C(e){return e?new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A"}const N=(e,t)=>{switch(e){case"date_emission":case"date_echeance":return C(d(t,e));case"amount":case"amount_pay":case"remaining_amount":case"total_quantity":return A(d(t,e));default:return d(t,e)||"N/A"}},$=async e=>{await r.processePayment(e)};return I(()=>{var e,t;h(),Object.keys(l.query).length>0&&((e=l.query)!=null&&e.TransactionToken)&&P((t=l.query)==null?void 0:t.TransactionToken)}),(e,t)=>{const c=T,_=j,D=B;return n(),u("div",null,[y(D,null,{default:O(({userConnected:F})=>{var k;return[s(p)?(n(),w(c,{key:0})):(n(),u("div",Q,[a("section",X,[a("div",Y,[a("h3",Z,m(e.$t("facture.detail.title")),1),a("div",ee,[a("p",te,m(e.$t("facture.detail.desc")),1),a("button",{type:"button",onClick:t[0]||(t[0]=i=>v(!0)),class:"cursor-pointer items-center bg-primary justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none text-xs disabled:opacity-50 bg-pri text-slate-50 shadow px-4 py-3 self-start"},m(e.$t("facture.detail.btn_payment")),1)])]),a("div",ae,[a("div",se,[a("div",ne,[(n(!0),u(S,null,W(q.left,(i,L)=>(n(),u("div",{key:L,class:"px-4 py-2 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},[a("div",oe,m(e.$t(i.label)),1),a("div",le,[i.isComponent?(n(),w(G(i.isComponent),{key:0,status:d(s(o).facture,i.key)||"N/A"},null,8,["status"])):(n(),u("span",ie,m(N(i.key,s(o).facture)||"N/A"),1))])]))),128))])])])]),a("div",re,[y(s(V),{user:F,rubriques:(k=s(o).facture)==null?void 0:k.rubriques,facture:s(o).facture},null,8,["user","rubriques","facture"])])])),y(_,{"is-active":s(g),"set-active":v,paymentAmount:s(r).paymentAmount,processPayment:()=>$(s(o).facture),"is-loading":s(r).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"])]}),_:1})])}}});export{we as default};
