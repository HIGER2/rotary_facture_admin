import{a3 as a,n as l}from"./DZchtIta.js";async function d(s,i={}){var o;const{getCookie:u}=a(),t=u("token");let c={...i,baseURL:"http://localhost:8000/api/",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}};try{return{data:await $fetch(s,{...c,onResponseError({response:n}){var r;if(n.status===401&&((r=n._data)==null?void 0:r.message)==="Unauthenticated."){const{removeCookie:p}=a();p("token"),l("/auth/login")}}}),error:null}}catch(e){return e.response?{data:null,error:((o=e.response)==null?void 0:o._data)||"Erreur inconnue"}:{data:null,error:"Une erreur inconnue est survenue"}}}export{d as u};
