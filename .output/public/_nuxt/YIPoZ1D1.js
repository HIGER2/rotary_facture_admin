import{f as _,aR as V,bF as k,bA as A,c as M,o as D,a as O,b as P,t as $,bf as j,aS as z,l as N,E as B,G as p,y as q,r as C,H as b}from"./DoEeMXyA.js";const U={class:"mt-4 flex w-full flex-col justify-start gap-1"},Y=["for"],L=_({__name:"FormTextArea",props:V({label:{},placeholder:{},modelValue:{},name:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:V(["update:modelValue"],["update:modelValue"]),setup(t,{emit:c}){k(t,"modelValue");const n=t,o=c,d=A();return(r,i)=>{const y=j("TextArea");return D(),M("div",U,[O("label",{for:r.name,class:"text-[13px] font-[500] text-zinc-700"},$(r.label),9,Y),P(y,z({id:r.name,value:n.modelValue,onInput:i[0]||(i[0]=g=>o("update:modelValue",g.target.value)),placeholder:r.placeholder,disabled:r.disabled},N(d),{class:"flex resize-none w-full rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-xs transition-colors placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50"}),null,16,["id","value","placeholder","disabled"])])}}}),G=B("rubrique",()=>{async function t(r){return await p(`/rubrique/all?${r.toString()}`)}async function c(r){return await p(`/rubrique/all/filter?${r.toString()}`)}async function n(r){return await p(`/rubrique/${r.id}/${r.uid}`)}async function o(r){return await p("/rubrique/create",{method:"POST",body:r})}async function d(r){return await p("/rubrique/update",{method:"put",body:r})}return{all:t,create:o,findDetail:n,allByFilter:c,update:d}}),J=B("RubriqueViewModel",()=>{const t=q({data:[],page:[]}),c=C(),n=C(!1),o=G();let d={libele:"",price:"",designation:"",status:"actif"};const r=q({...d}),i=q({...d,id:""});async function y(u=""){var l,f,e,w,v,S,x,h;const a=await o.allByFilter(u);return(f=(l=a.data)==null?void 0:l.data)==null||f.links.shift(),(w=(e=a.data)==null?void 0:e.data)==null||w.links.pop(),t.page=(S=(v=a.data)==null?void 0:v.data)==null?void 0:S.links,t.data=[...(h=(x=a.data)==null?void 0:x.data)==null?void 0:h.data.map((s,H)=>({code:s==null?void 0:s.code,id:s==null?void 0:s.id,uid:s==null?void 0:s.rubrique_uid,libele:s==null?void 0:s.libele,designation:s==null?void 0:s.designation,price:s==null?void 0:s.price,status:s==null?void 0:s.status}))],a}async function g(u=""){var l,f;const a=await o.all(u);return[...(f=(l=a.data)==null?void 0:l.data)==null?void 0:f.map((e,w)=>({code:e==null?void 0:e.code,id:e==null?void 0:e.id,uid:e==null?void 0:e.rubrique_uid,libele:e==null?void 0:e.libele,designation:e==null?void 0:e.designation,price:e==null?void 0:e.price,status:e==null?void 0:e.status}))],a}async function R(u){var l;const a=await o.findDetail(u);return c.value=(l=a==null?void 0:a.data)==null?void 0:l.data,a}async function E(){var l;n.value=!0;let u={...r};const a=await o.create(u);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&(T(),b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS})),n.value=!1}async function F(){var l;n.value=!0;let u={...i};const a=await o.update(u);a!=null&&a.error&&alert((l=a==null?void 0:a.error)==null?void 0:l.message),a!=null&&a.data&&b("Opération éffectuée",{autoClose:1e3,type:b.TYPE.SUCCESS}),n.value=!1}function T(){Object.assign(r,{...d})}return{all:g,rubrique:c,rubriques:t,newRubrique:r,create:E,isLoading:n,findDetail:R,allByFilter:y,updateRubrique:i,update:F}});export{L as _,J as u};
