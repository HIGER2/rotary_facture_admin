import{_ as P}from"./roZ0F2EQ.js";import{g as U,c as f,o as v,b as n,w,a,q as A,z as R,r as g,m as E,k as D,t as x,v as I,A as z,p as d,F as G,y as H}from"./CjJZhuUa.js";import{_ as k}from"./cxCYjs6Y.js";import{_ as C}from"./DstjqBu6.js";import{_ as L}from"./Cbtr6xAU.js";import{_ as q}from"./B00qUy2g.js";import{_ as J}from"./B9UmkNTd.js";import{u as K}from"./Dltb7aJ6.js";import"./DgSy6AZV.js";const O={class:"flex items-center gap-1 text-[12px]"},Q=["onClick"],W=U({__name:"TableComponent",props:{data:{},setUpdate:{type:Function},loading:{type:Boolean}},setup(b){const s=b,e=[{label:"#",key:"id"},{label:"Nom",key:"name"},{label:"Prénoms",key:"last_name"},{label:"Role",key:"role"},{label:"téléphone",key:"phone"},{label:"email",key:"email"},{label:"Action",key:"action"}];return(l,i)=>{const p=P;return v(),f("div",null,[n(p,{loading:l.loading,columns:e,data:s.data},{action:w(({item:m})=>[a("div",O,[a("button",{type:"button",onClick:c=>s.setUpdate(m),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},i[0]||(i[0]=[a("i",{class:"uil uil-pen"},null,-1)]),8,Q)])]),_:1},8,["loading","data"])])}}}),X={class:"grid w-full max-w-300 gap-4"},Y={class:"mb-2 flex gap-1.5"},Z={class:"mb-2"},ee={class:"mb-2 flex gap-1.5"},le={class:"mb-2 flex gap-1.5"},ae={class:"w-full mt-3"},oe=U({__name:"AddComponent",props:{isActive:{type:Boolean},setActive:{type:Function},newUser:{},createUser:{type:Function},isLoading:{type:Boolean}},setup(b){const s=[{label:"admin",value:"admin"},{label:"super admin",value:"super_admin"},{label:"modérateur",value:"modérateur"}];return(e,l)=>{const i=k,p=C,m=L,c=q;return v(),f("div",null,[n(c,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:w(()=>[a("div",X,[l[7]||(l[7]=a("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[a("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau utilisateur ")],-1)),a("form",{class:"",onSubmit:l[6]||(l[6]=A(t=>e.createUser(),["prevent"]))},[a("div",Y,[n(i,{required:"",modelValue:e.newUser.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.newUser.name=t),label:"Nom",placeholder:"Nom"},null,8,["modelValue"]),n(i,{required:"",modelValue:e.newUser.last_name,"onUpdate:modelValue":l[1]||(l[1]=t=>e.newUser.last_name=t),label:"Prénoms",placeholder:"Prénoms"},null,8,["modelValue"])]),a("div",Z,[n(p,{required:"",modelValue:e.newUser.role,"onUpdate:modelValue":l[2]||(l[2]=t=>e.newUser.role=t),options:s,label:"Role",placeholder:"Role",name:"title"},null,8,["modelValue"])]),a("div",ee,[n(i,{required:"",modelValue:e.newUser.phone,"onUpdate:modelValue":l[3]||(l[3]=t=>e.newUser.phone=t),name:"annee",min:"2025",max:"2099",step:"1",label:"Téléphone",placeholder:"Téléphone"},null,8,["modelValue"]),n(i,{required:"",modelValue:e.newUser.email,"onUpdate:modelValue":l[4]||(l[4]=t=>e.newUser.email=t),label:"Email",placeholder:"Email"},null,8,["modelValue"])]),a("div",le,[n(i,{required:"",modelValue:e.newUser.password,"onUpdate:modelValue":l[5]||(l[5]=t=>e.newUser.password=t),type:"password",name:"annee",min:"2025",max:"2099",step:"1",label:"Mot de passe temporaire",placeholder:"Mot de passe temporaire"},null,8,["modelValue"])]),a("div",ae,[n(m,{label:e.$t("exercice.form.button_new"),isLoading:e.isLoading},null,8,["label","isLoading"])])],32)])]),_:1},8,["isActive","onClose"])])}}}),te={class:"grid w-full max-w-300 gap-4"},se={class:"mb-2 flex gap-1.5"},ne={class:"mb-2"},ie={class:"mb-2 flex gap-1.5"},re={class:"mb-2 flex gap-1.5"},de={class:"w-full mt-3"},ue=U({__name:"UpdateComponent",props:{isActive:{type:Boolean},setActive:{type:Function},update:{},updateUser:{type:Function},isLoading:{type:Boolean}},setup(b){const s=[{label:"admin",value:"admin"},{label:"super admin",value:"super_admin"},{label:"modérateur",value:"modérateur"}];return(e,l)=>{const i=k,p=C,m=L,c=q;return v(),f("div",null,[n(c,{isActive:e.isActive,onClose:()=>e.setActive(!1)},{default:w(()=>[a("div",te,[l[7]||(l[7]=a("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[a("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier utilisateur ")],-1)),a("form",{class:"",onSubmit:l[6]||(l[6]=A(t=>e.updateUser(),["prevent"]))},[a("div",se,[n(i,{required:"",modelValue:e.update.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.update.name=t),label:"Nom",placeholder:"Nom"},null,8,["modelValue"]),n(i,{required:"",modelValue:e.update.last_name,"onUpdate:modelValue":l[1]||(l[1]=t=>e.update.last_name=t),label:"Prénoms",placeholder:"Prénoms"},null,8,["modelValue"])]),a("div",ne,[n(p,{required:"",modelValue:e.update.role,"onUpdate:modelValue":l[2]||(l[2]=t=>e.update.role=t),options:s,label:"Role",placeholder:"Role",name:"title"},null,8,["modelValue"])]),a("div",ie,[n(i,{required:"",modelValue:e.update.phone,"onUpdate:modelValue":l[3]||(l[3]=t=>e.update.phone=t),name:"annee",min:"2025",max:"2099",step:"1",label:"Téléphone",placeholder:"Téléphone"},null,8,["modelValue"]),n(i,{required:"",modelValue:e.update.email,"onUpdate:modelValue":l[4]||(l[4]=t=>e.update.email=t),label:"Email",placeholder:"Email"},null,8,["modelValue"])]),a("div",re,[n(i,{modelValue:e.update.password,"onUpdate:modelValue":l[5]||(l[5]=t=>e.update.password=t),type:"password",name:"annee",min:"2025",max:"2099",step:"1",label:"Mot de passe temporaire",placeholder:"Mot de passe temporaire"},null,8,["modelValue"])]),a("div",de,[n(m,{label:"Mettre à jour",isLoading:e.isLoading},null,8,["isLoading"])])],32)])]),_:1},8,["isActive","onClose"])])}}}),pe={class:"w-full"},me={class:"w-full p-2"},ce={class:"w-full"},fe={class:"w-full flex items-center justify-between mb-10"},ve={class:"w-auto"},be={class:"w-full flex items-center justify-between mb-3"},_e={class:"w-auto gap-2 flex items-center justify-between"},Ue={class:"flex gap-2 w-auto rounded-lg border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 h-8"},we={class:"w-auto px-1 block border-r border-gray-300"},ge={class:"w-auto flex items-center justify-center h-full"},ye=["value"],Ve={class:"w-full p-2"},Fe=U({__name:"index",setup(b){const s=K(),e=R({search:"",status:"",limit:"1"}),l=g(!1),i=g(!1),p=g(!1),m=o=>{l.value=o},c=o=>{i.value=o},t=o=>{s.updateUser.last_name=o==null?void 0:o.last_name,s.updateUser.email=o==null?void 0:o.email,s.updateUser.id=o==null?void 0:o.id,s.updateUser.name=o==null?void 0:o.name,s.updateUser.phone=o==null?void 0:o.phone,s.updateUser.role=o==null?void 0:o.role,c(!0)},S=async()=>{await s.create(),await _()},F=async()=>{await s.update(),await _()},_=async(o={})=>{const r=new URLSearchParams({search:e.search||"",page:e.limit||"",status:o.status||""});await s.allByFilter(r),p.value=!1};return E(e,o=>{let r=setTimeout(async()=>{_(o),clearTimeout(r)},400)},{deep:!0}),D(()=>{_()}),(o,r)=>{const M=W,B=oe,N=ue,T=J;return v(),f("div",null,[n(T,null,{default:w(()=>{var y,V,h,$;return[a("div",pe,[a("div",me,[a("div",ce,[a("div",fe,[r[2]||(r[2]=a("h5",{class:"text-sm font-semibold uppercase text-neutral-500"}," Utilisateurs ",-1)),a("div",ve,[a("button",{onClick:r[0]||(r[0]=u=>m(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors text-xs disabled:opacity-50 bg-primary text-slate-50 shadow px-4 py-3 self-start"}," Ajouter un Utilisateur ")])]),a("div",be,[r[3]||(r[3]=a("div",{class:"w-auto"},null,-1)),a("div",_e,[a("div",Ue,[a("div",we,x(o.$t("filter_page")),1),a("div",ge,[I(a("select",{"onUpdate:modelValue":r[1]||(r[1]=u=>d(e).limit=u),class:"w-full h-full bg-transparent border-none outline-none"},[(v(!0),f(G,null,H((V=(y=d(s))==null?void 0:y.users)==null?void 0:V.page,(u,j)=>(v(),f("option",{key:j,value:u==null?void 0:u.label},x(u==null?void 0:u.label),9,ye))),128))],512),[[z,d(e).limit]])])])])])]),a("div",Ve,[n(M,{loading:d(p),data:($=(h=d(s))==null?void 0:h.users)==null?void 0:$.data,setUpdate:t},null,8,["loading","data"])]),n(B,{"new-user":d(s).newUser,"create-user":S,"set-active":m,"is-active":d(l),"is-loading":d(s).isLoading},null,8,["new-user","is-active","is-loading"]),n(N,{update:d(s).updateUser,"update-user":F,"set-active":c,"is-active":d(i),"is-loading":d(s).isLoading},null,8,["update","is-active","is-loading"])])])]}),_:1})])}}});export{Fe as default};
