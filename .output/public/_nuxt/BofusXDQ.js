import{_ as O,a as W}from"./BVupHDiT.js";import{_ as z}from"./evFWZEuu.js";import{_ as H}from"./CRaQQAF3.js";import{_ as R}from"./5F4GCIAb.js";import{_ as j}from"./ChxvMlXF.js";import{_ as T}from"./CoPIXp5D.js";import{_ as N}from"./CAKjjLj7.js";import{g as A,c as v,o as f,b as i,w as _,a as e,q as D,r as h,p as o,j as J,k as K,C as Q,t as g}from"./DZchtIta.js";import{u as G}from"./BEtdqFTh.js";import{_ as X}from"./Bsxb1mwF.js";import{u as Y}from"./B4Besubz.js";import"./qvOv5KBm.js";const Z={class:"grid mt-4 w-full max-w-lg gap-4"},tt={class:"space-y-2 mb-4 flex gap-2"},et={class:"space-y-2 mb-4"},st=A({__name:"AddPaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},createPayment:{type:Function},isLoading:{type:Boolean},newPayment:{},optionMethode:{},optionStatus:{}},setup(b){return(t,s)=>{const m=R,r=j,u=T,d=N;return f(),v("div",null,[i(d,{isActive:t.isActive,onClose:()=>t.setActive(!1)},{default:_(()=>[e("div",Z,[s[4]||(s[4]=e("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[e("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Nouveau paiement ")],-1)),e("form",{class:"space-y-8",onSubmit:s[3]||(s[3]=D((...l)=>t.createPayment&&t.createPayment(...l),["prevent"]))},[e("div",tt,[i(m,{required:"",label:"Statut",modelValue:t.newPayment.status,"onUpdate:modelValue":s[0]||(s[0]=l=>t.newPayment.status=l),options:t.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),i(m,{required:"",modelValue:t.newPayment.mode_paiement,"onUpdate:modelValue":s[1]||(s[1]=l=>t.newPayment.mode_paiement=l),options:t.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),e("div",et,[i(r,{required:"",modelValue:t.newPayment.amount,"onUpdate:modelValue":s[2]||(s[2]=l=>t.newPayment.amount=l),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),i(u,{label:"Créer",isLoading:t.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),nt={class:"grid mt-4 w-full max-w-lg gap-4"},at={class:"space-y-2 mb-4"},ot=A({__name:"AddPaymentClubComponent",props:{isActive:{type:Boolean},setActive:{type:Function},processPayment:{type:Function},isLoading:{type:Boolean},paymentAmount:{}},setup(b){return(t,s)=>{const m=j,r=T,u=N;return f(),v("div",null,[i(u,{isActive:t.isActive,onClose:()=>t.setActive(!1)},{default:_(()=>[e("div",nt,[s[2]||(s[2]=e("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[e("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Effectué un paiement ")],-1)),e("form",{class:"space-y-8",onSubmit:s[1]||(s[1]=D((...d)=>t.processPayment&&t.processPayment(...d),["prevent"]))},[e("div",at,[i(m,{required:"",modelValue:t.paymentAmount.amount,"onUpdate:modelValue":s[0]||(s[0]=d=>t.paymentAmount.amount=d),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),i(r,{label:"payé maintenant",isLoading:t.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),it={class:"grid mt-4 w-full max-w-lg gap-4"},lt={class:"space-y-2 mb-4 flex gap-2"},mt={class:"space-y-2 mb-4"},dt=A({__name:"UpdatePaymentComponent",props:{isActive:{type:Boolean},setActive:{type:Function},updatePayment:{type:Function},isLoading:{type:Boolean},update:{},optionMethode:{},optionStatus:{}},setup(b){return(t,s)=>{const m=R,r=j,u=T,d=N;return f(),v("div",null,[i(d,{isActive:t.isActive,onClose:()=>t.setActive(!1)},{default:_(()=>[e("div",it,[s[4]||(s[4]=e("div",{class:"flex flex-col space-y-1.5 text-center sm:text-left"},[e("h2",{id:"radix-:r70:",class:"text-lg font-semibold leading-none tracking-tight"}," Modifier paiement ")],-1)),e("form",{class:"space-y-8",onSubmit:s[3]||(s[3]=D((...l)=>t.updatePayment&&t.updatePayment(...l),["prevent"]))},[e("div",lt,[i(m,{required:"",label:"Statut",modelValue:t.update.status,"onUpdate:modelValue":s[0]||(s[0]=l=>t.update.status=l),options:t.optionStatus,placeholder:"Statut",name:"title"},null,8,["modelValue","options"]),i(m,{required:"",modelValue:t.update.mode_paiement,"onUpdate:modelValue":s[1]||(s[1]=l=>t.update.mode_paiement=l),options:t.optionMethode,label:"Mode de paiement",placeholder:"mode paiement",name:"title"},null,8,["modelValue","options"])]),e("div",mt,[i(r,{required:"",modelValue:t.update.amount,"onUpdate:modelValue":s[2]||(s[2]=l=>t.update.amount=l),min:"1",type:"number",label:"Montant",placeholder:"Montant",name:"title"},null,8,["modelValue"])]),i(u,{label:"Enregistrer",isLoading:t.isLoading},null,8,["isLoading"])],32)])]),_:1},8,["isActive","onClose"])])}}}),rt={class:"mt-4"},ut={class:"px-4 sm:px-0 flex items-center justify-between"},pt={class:"mt-6"},ct=["onClick"],yt=A({__name:"PaymentComponent",props:{payments:{},facture:{},user:{},handleListe:{type:Function}},setup(b){const t=G(),s=b,m=h(!1),r=h(!1),u=h(!1),d=n=>{r.value=n},l=n=>{m.value=n},p=n=>{u.value=n},a=n=>{t.updatePayment.status=n==null?void 0:n.status,t.updatePayment.mode_paiement=n==null?void 0:n.mode_paiement,t.updatePayment.id=n==null?void 0:n.id,t.updatePayment.amount=n==null?void 0:n.amount,d(!0)},F=async n=>{await t.create(n),s.handleListe()},M=async n=>{await Promise.all([t.processePayment(n),s.handleListe()])},S=async()=>{await Promise.all([t.update(),s.handleListe()])},q={admin:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"},{label:"action",key:"action"}],club:[{label:"référence",key:"reference"},{label:"montant",key:"amount"},{label:"statut",key:"status"},{label:"mode paiement",key:"mode_paiement"},{label:"date",key:"date"}]},k=[{label:"en attente",status:"en attente"},{label:"payé",status:"payée"},{label:"échec",status:"échec"},{label:"annulé",status:"annulé"}],x=[{label:"espèces",status:"espèces"},{label:"chèque",status:"chèque"},{label:"mobile money",status:"mobile money"},{label:"virement",status:"virement"},{label:"carte",status:"carte"}];return(n,c)=>{var P,w;const C=H,U=O,V=st,$=ot,L=dt;return f(),v("section",rt,[e("div",ut,[c[2]||(c[2]=e("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Paiements",-1)),((P=n.user)==null?void 0:P.role)=="admin"?(f(),v("button",{key:0,type:"button",onClick:c[0]||(c[0]=y=>l(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none text-xs disabled:opacity-50 bg-[#1F2923] text-slate-50 shadow hover:bg-[#2f3a34] px-4 py-3 self-start"}," Nouveau paiement ")):(f(),v("button",{key:1,type:"button",onClick:c[1]||(c[1]=y=>p(!0)),class:"cursor-pointer items-center justify-center whitespace-nowrap rounded-full font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none text-xs disabled:opacity-50 bg-[#1F2923] text-slate-50 shadow hover:bg-[#2f3a34] px-4 py-3 self-start"}," Effectué un paiement "))]),e("div",pt,[i(U,{columns:q[(w=n.user)==null?void 0:w.role],data:n.payments},{status:_(({item:y})=>[i(C,{status:y==null?void 0:y.status},null,8,["status"])]),action:_(({item:y})=>[e("button",{type:"button",onClick:B=>a(y),class:"h-7 w-7 cursor-pointer hover:bg-gray-200 flex items-center justify-center text-center rounded-full border border-gray-200 text-gray-500 hover:text-gray-700 shadow"},c[3]||(c[3]=[e("i",{class:"uil uil-pen"},null,-1)]),8,ct)]),_:1},8,["columns","data"])]),i(V,{"is-active":o(m),"set-active":l,"option-status":k,newPayment:o(t).newPayment,"option-methode":x,createPayment:()=>F(n.facture),"is-loading":o(t).isLoading},null,8,["is-active","newPayment","createPayment","is-loading"]),i($,{"is-active":o(u),"set-active":p,paymentAmount:o(t).paymentAmount,processPayment:()=>M(n.facture),"is-loading":o(t).isLoading},null,8,["is-active","paymentAmount","processPayment","is-loading"]),i(L,{"is-active":o(r),"set-active":d,"option-status":k,update:o(t).updatePayment,"option-methode":x,updatePayment:S,"is-loading":o(t).isLoading},null,8,["is-active","update","is-loading"])])}}}),gt={key:1,class:"w-full p-2"},ft={class:"w-full"},vt={class:"mt-6 bg-white p-4 border overflow-hidden border-gray-200 rounded-lg"},_t={class:"divide-y divide-gray-100"},bt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},xt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Pt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},wt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},ht={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},At={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},kt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Ct={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Ut={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Vt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},$t={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Lt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Ft={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Mt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},St={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},qt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Bt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},jt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Tt={class:"px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0"},Nt={class:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0"},Xt=A({__name:"[slug]",setup(b){const t=Y(),s=G(),m=J(),r=h(!1),u=h(!1),d=async()=>{var p;await t.findWithPaiement((p=m==null?void 0:m.params)==null?void 0:p.slug),u.value=!1},l=async p=>{r.value=!0,await s.checkPayment({TransactionToken:p}),r.value=!1};return K(()=>{var p,a;d(),Object.keys(m.query).length>0&&((p=m.query)!=null&&p.TransactionToken)&&l((a=m.query)==null?void 0:a.TransactionToken)}),(p,a)=>{const F=W,M=z,S=yt,q=X;return f(),v("div",null,[i(q,null,{default:_(({userConnected:k})=>{var x,n,c,C,U,V,$,L,P,w,y,B,E,I;return[o(u)?(f(),Q(F,{key:0})):(f(),v("div",gt,[e("section",ft,[a[10]||(a[10]=e("div",{class:"px-4 sm:px-0"},[e("h3",{class:"text-base font-semibold leading-7 text-gray-900"},"Général"),e("p",{class:"mt-1 max-w-2xl text-sm leading-6 text-gray-500"},"Détail de la facture")],-1)),e("div",vt,[e("dl",_t,[e("div",bt,[a[0]||(a[0]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," N°Facture ",-1)),e("div",xt,g((x=o(t).facture)==null?void 0:x.reference),1)]),e("div",Pt,[a[1]||(a[1]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Montant ",-1)),e("div",wt,g((n=o(t).facture)==null?void 0:n.amount),1)]),e("div",ht,[a[2]||(a[2]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Reste à payer ",-1)),e("div",At,g((c=o(t).facture)==null?void 0:c.remaining_amount),1)]),e("div",kt,[a[3]||(a[3]=e("dt",{class:"text-sm font-medium leading-6 text-gray-900"}," Statut ",-1)),e("div",Ct,[i(M,{status:(C=o(t).facture)==null?void 0:C.status},null,8,["status"])])]),e("div",Ut,[a[4]||(a[4]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Description ",-1)),e("div",Vt,g((U=o(t).facture)==null?void 0:U.objet),1)]),e("div",$t,[a[5]||(a[5]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Club ",-1)),e("div",Lt,g(($=(V=o(t).facture)==null?void 0:V.club)==null?void 0:$.name),1)]),e("div",Ft,[a[6]||(a[6]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Libélé rubrique ",-1)),e("div",Mt,g((P=(L=o(t).facture)==null?void 0:L.rubrique)==null?void 0:P.libele),1)]),e("div",St,[a[7]||(a[7]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Prix rubrique ",-1)),e("div",qt,g((y=(w=o(t).facture)==null?void 0:w.rubrique)==null?void 0:y.price),1)]),e("div",Bt,[a[8]||(a[8]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," Date émission ",-1)),e("div",jt,g((B=o(t).facture)==null?void 0:B.date_emission),1)]),e("div",Tt,[a[9]||(a[9]=e("div",{class:"text-sm font-medium leading-6 text-gray-900"}," date échéance ",-1)),e("div",Nt,g((E=o(t).facture)==null?void 0:E.date_echeance),1)])])])]),i(S,{user:k,payments:(I=o(t).facture)==null?void 0:I.payments,facture:o(t).facture,handleListe:d},null,8,["user","payments","facture"])]))]}),_:1})])}}});export{Xt as default};
